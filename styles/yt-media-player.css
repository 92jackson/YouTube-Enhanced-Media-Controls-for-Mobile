/*
YTEMC CSS - 92jackson
================================
Custom YouTube media player stylesheet with theming support.
Mobile-first responsive design with touch-optimized interactions.
*/

/*
 * TABLE OF CONTENTS
 * =================
 * 
 * 1. CSS Custom Properties (Theme Variables)
 *    ├── Dark Theme
 *    ├── Light Theme
 *    ├── System Theme (prefers-color-scheme)
 *    └── Color Themes (Purple, Blue, Green, Orange, Red, Pink)
 * 
 * 2. Base & Reset Styles
 * 
 * 3. Custom Navbar
 *    ├── Base styles
 *    └── Active states
 * 
 * 4. Drawer Handle
 * 
 * 5. Playlist Drawer
 *    ├── Container & layout
 *    ├── Track items
 *    ├── Queue items
 *    ├── Horizontal mode
 *    └── Scrollbar
 * 
 * 6. Player Controls
 *    ├── Container
 *    └── Control groups
 * 
 * 7. Control Buttons
 *    ├── Base button styles
 *    ├── Specific button types
 *    └── Button states
 * 
 * 8. Layout Sizes
 *    ├── Large layout
 *    └── Compact layout
 * 
 * 9. Context Menus & Overlays
 *    ├── Dropdown menus
 *    ├── Filter popup
 *    └── I'm Feeling Lucky preview
 * 
 * 10. Favourites Dialog
 *     ├── Container & layout
 *     ├── Header & controls
 *     ├── Search & filter
 *     ├── Content & items
 *     └── More options menu
 * 
 * 11. Limited Height Mode
 * 
 * 12. Visibility & Display Modes
 * 
 * 13. Body & Global States
 * 
 * 14. Native Element Overrides
 * 
 * 15. Mobile Active States
 * 
 * 16. Animations & Keyframes
 * 
 * 17. Desktop Hover States
 *     @media (hover: hover) and (pointer: fine)
 */

/* === CSS CUSTOM PROPERTIES === */

/* Root Variables (Dark Theme Default) */
body {
	/* Accent Colors */
	--yt-player-accent-primary: #ff0000;
	--yt-player-accent-secondary: #dd0000;
	--yt-player-accent-text: #ffffff;
	--yt-player-accent-primary-alpha-bg: rgba(255, 0, 0, 0.08);
	--yt-player-accent-primary-alpha-bg-hover: rgba(255, 0, 0, 0.12);
	--yt-player-accent-text-pulse: rgba(255, 255, 255, 0.7);

	/* Background Colors */
	--yt-player-bg-primary: rgba(40, 40, 40, 0.95);
	--yt-player-bg-secondary: #383838;
	--yt-player-bg-tertiary: #2a2a2a;
	--yt-player-bg-pressed: rgba(255, 255, 255, 0.1);
	--yt-player-button-normal: #4f4f4f;
	--yt-player-bg-active: rgba(255, 255, 255, 0.2);
	--yt-player-bg-hover: #505050;

	/* Text Colors */
	--yt-player-text-primary: #f0f0f0;
	--yt-player-text-secondary: #dadada;
	--yt-player-text-muted: #495057;
	--yt-player-text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);

	/* Drawer Handle Colors */
	--yt-player-handle-bg: #282828;
	--yt-player-handle-text-primary: #f0f0f0;
	--yt-player-handle-text-secondary: #b0b0b0;
	--yt-player-handle-cue-bg: #606060;
	--yt-player-restore-button-bg: #4f4f4f;
	--yt-player-restore-button-hover-bg: #606060;
	--yt-player-restore-button-text: #f0f0f0;
	--yt-player-handle-closed-bg: #333333;

	/* Playlist Colors */
	--yt-player-playlist-bg: #1a1a1a;
	--yt-player-playlist-text-primary: #e8e8e8;
	--yt-player-playlist-text-secondary: #b8b8b8;
	--yt-player-playlist-border: #333333;
	--yt-player-playlist-hover-bg: #2a2a2a;
	--yt-player-playlist-active-bg: #353535;
	--yt-player-playlist-thumbnail-bg: #2d2d2d;
	--yt-player-playlist-thumbnail-border: #404040;

	/* Seekbar Colors */
	--yt-player-seekbar-bg: linear-gradient(135deg, #3a3a3a 0%, #2c2c2c 100%);
	--yt-player-seekbar-track: #555;
	--yt-player-seekbar-handle: #ffffff;

	/* Button Colors */
	--yt-player-button-active: #404040;
	--yt-player-button-failed: #222222;
	--yt-player-button-failed-hover: #333333;
	--yt-player-button-failed-active: #111111;
	--yt-player-button-buffering: #1c1c1c;
	--yt-player-button-buffering-hover: #333333;

	/* Shadow Colors */
	--yt-player-shadow-light: rgba(0, 0, 0, 0.5);
	--yt-player-shadow-medium: rgba(0, 0, 0, 0.3);
	--yt-player-shadow-heavy: rgba(0, 0, 0, 0.1);
	--yt-player-shadow-navbar: rgba(223, 223, 223, 0.4);
	--yt-player-shadow-navbar-dark: rgba(72, 72, 72, 0.4);

	/* Size Variables */
	--yt-max-voice-button-width: 48px;
	--yt-font-size-multiplier: 1;
}

/* Light Theme Overrides */
body.yt-theme-light {
	--yt-player-accent-text-pulse: rgba(0, 0, 0, 0.4);
	--yt-player-bg-primary: rgba(255, 255, 255, 0.95);
	--yt-player-bg-secondary: #f0f0f0;
	--yt-player-bg-tertiary: #e8e8e8;
	--yt-player-bg-pressed: rgba(0, 0, 0, 0.2);
	--yt-player-button-normal: #e0e0e0;
	--yt-player-bg-active: rgba(0, 0, 0, 0.08);
	--yt-player-bg-hover: #e8e8e8;
	--yt-player-text-primary: #111111;
	--yt-player-text-secondary: #222222;
	--yt-player-text-muted: #666666;
	--yt-player-text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
	--yt-player-handle-bg: #ffffff;
	--yt-player-handle-text-primary: #111111;
	--yt-player-handle-text-secondary: #666666;
	--yt-player-handle-cue-bg: #cccccc;
	--yt-player-restore-button-bg: #e0e0e0;
	--yt-player-restore-button-hover-bg: #d0d0d0;
	--yt-player-restore-button-text: #111111;
	--yt-player-handle-closed-bg: #f5f5f5;
	--yt-player-playlist-bg: #ffffff;
	--yt-player-playlist-text-primary: #1e2022;
	--yt-player-playlist-text-secondary: #5a6169;
	--yt-player-playlist-border: #e9ecef;
	--yt-player-playlist-hover-bg: #f0f2f5;
	--yt-player-playlist-active-bg: #f8f9fa;
	--yt-player-playlist-thumbnail-bg: #f1f3f4;
	--yt-player-playlist-thumbnail-border: #e8eaed;
	--yt-player-seekbar-bg: linear-gradient(135deg, #e9e9e9 0%, #dcdcdc 100%);
	--yt-player-seekbar-track: #ccc;
	--yt-player-seekbar-handle: #333333;
	--yt-player-button-active: #e8e8e8;
	--yt-player-button-failed: #f5f5f5;
	--yt-player-button-failed-hover: #e8e8e8;
	--yt-player-button-failed-active: #ddd;
	--yt-player-button-buffering: #1c1c1c;
	--yt-player-button-buffering-hover: #333333;
	--yt-player-shadow-light: rgba(0, 0, 0, 0.1);
	--yt-player-shadow-medium: rgba(0, 0, 0, 0.15);
	--yt-player-shadow-heavy: rgba(0, 0, 0, 0.05);
	--yt-player-shadow-navbar: rgba(0, 0, 0, 0.1);
	--yt-player-shadow-navbar-dark: rgba(0, 0, 0, 0.2);
}

/* System Theme Logic */
@media (prefers-color-scheme: light) {
	body.yt-theme-system {
		--yt-player-accent-text-pulse: rgba(0, 0, 0, 0.4);
		--yt-player-bg-primary: rgba(255, 255, 255, 0.95);
		--yt-player-bg-secondary: #f0f0f0;
		--yt-player-bg-pressed: rgba(0, 0, 0, 0.08);
		--yt-player-button-normal: #e0e0e0;
		--yt-player-bg-active: rgba(0, 0, 0, 0.08);
		--yt-player-bg-hover: #e8e8e8;
		--yt-player-text-primary: #111111;
		--yt-player-text-secondary: #222222;
		--yt-player-text-muted: #666666;
		--yt-player-text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
		--yt-player-handle-bg: #ffffff;
		--yt-player-handle-text-primary: #111111;
		--yt-player-handle-text-secondary: #666666;
		--yt-player-handle-cue-bg: #cccccc;
		--yt-player-handle-closed-bg: #f5f5f5;
		--yt-player-playlist-bg: #ffffff;
		--yt-player-playlist-text-primary: #1e2022;
		--yt-player-playlist-text-secondary: #5a6169;
		--yt-player-playlist-border: #e9ecef;
		--yt-player-playlist-hover-bg: #f0f2f5;
		--yt-player-playlist-active-bg: #f8f9fa;
		--yt-player-playlist-thumbnail-bg: #f1f3f4;
		--yt-player-playlist-thumbnail-border: #e8eaed;
		--yt-player-seekbar-bg: linear-gradient(135deg, #e9e9e9 0%, #dcdcdc 100%);
		--yt-player-seekbar-track: #ccc;
		--yt-player-seekbar-handle: #333333;
		--yt-player-button-active: #e8e8e8;
		--yt-player-button-failed: #f5f5f5;
		--yt-player-button-failed-hover: #e8e8e8;
		--yt-player-button-failed-active: #ddd;
		--yt-player-button-buffering: #1c1c1c;
		--yt-player-button-buffering-hover: #333333;
		--yt-player-shadow-light: rgba(0, 0, 0, 0.1);
		--yt-player-shadow-medium: rgba(0, 0, 0, 0.15);
		--yt-player-shadow-heavy: rgba(0, 0, 0, 0.05);
		--yt-player-shadow-navbar: rgba(0, 0, 0, 0.1);
		--yt-player-shadow-navbar-dark: rgba(0, 0, 0, 0.2);
	}
}

/* === COLOR THEMES === */

/* Playlist Color Modes */
body.yt-playlist-light {
	--yt-player-playlist-bg: #ffffff;
	--yt-player-playlist-text-primary: #1e2022;
	--yt-player-playlist-text-secondary: #5a6169;
	--yt-player-playlist-border: #e9ecef;
	--yt-player-playlist-hover-bg: #f0f2f5;
	--yt-player-playlist-active-bg: #f8f9fa;
	--yt-player-playlist-thumbnail-bg: #f1f3f4;
	--yt-player-playlist-thumbnail-border: #e8eaed;
}

body.yt-playlist-dark {
	--yt-player-playlist-bg: #1a1a1a;
	--yt-player-playlist-text-primary: #e8e8e8;
	--yt-player-playlist-text-secondary: #b8b8b8;
	--yt-player-playlist-border: #333333;
	--yt-player-playlist-hover-bg: #2a2a2a;
	--yt-player-playlist-active-bg: #353535;
	--yt-player-playlist-thumbnail-bg: #2d2d2d;
	--yt-player-playlist-thumbnail-border: #404040;
}

/* === BASE STYLES === */

.yt-player-wrapper * {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}

.yt-player-wrapper {
	position: fixed;
	bottom: 0;
	left: 0;
	z-index: 999;
	display: flex;
	flex-direction: column;
	justify-content: flex-end;
	width: 100%;
	height: calc(100% - 48px);
	font-family: 'Roboto', 'Segoe UI', sans-serif;
	pointer-events: none;
	user-select: none !important;
	-webkit-user-select: none !important;
	-ms-user-select: none !important;
	transition: transform 0.3s ease-out, opacity 0.3s ease-out;
	transform: translateY(0);
	opacity: 1;
}

/* Hidden state - slide down and fade out */
body.yt-auto-hidden-player:not(.yt-limited-height-mode) .yt-player-wrapper {
	transform: translateY(100%);
	opacity: 0;
	pointer-events: none;
}

/* Prevent interactions when auto-hidden */
body.yt-auto-hidden-player:not(.yt-limited-height-mode) .yt-player-wrapper * {
	pointer-events: none !important;
}

.yt-player-wrapper.yt-player-hidden {
	display: none !important;
}

/* === CUSTOM NAVBAR === */

.yt-custom-navbar {
	position: fixed;
	top: 0;
	left: 0;
	z-index: 3;
	display: flex;
	align-items: center;
	justify-content: space-between;
	width: 100%;
	height: 48px;
	background-color: var(--yt-player-bg-primary);
	font-family: 'Roboto', 'Segoe UI', sans-serif;
	box-shadow: 0 2px 4px var(--yt-player-shadow-heavy);
	transition: all 0.5s ease;
}

.yt-drawer-full .yt-custom-navbar {
	box-shadow: 0 2px 4px var(--yt-player-shadow-heavy),
		0 -8px 25px var(--yt-player-shadow-navbar-dark);
}

.yt-navbar-logo {
	flex-shrink: 0;
	margin-left: 15px;
}

.yt-navbar-logo-button {
	display: block;
	width: 55px;
	height: 100%;
	padding: 2px;
	background: none;
	border: none;
	border-radius: 4px;
	cursor: pointer;
	transition: all 0.1s ease;
	transform-origin: center center;
	-webkit-tap-highlight-color: transparent;
}

.yt-navbar-logo-button:active {
	scale: 0.8;
}

.yt-navbar-logo-button svg {
	display: block;
	width: auto;
	height: 100%;
	margin-top: 1px;
}

.yt-navbar-logo-button svg g path:first-of-type {
	fill: var(--yt-player-accent-primary);
	transition: fill 2s ease;
	will-change: fill;
}

.yt-navbar-logo-button:active svg g path:first-of-type {
	fill: var(--yt-player-accent-secondary);
}

.yt-navbar-left {
	display: flex;
	flex: 1;
	align-items: center;
	gap: 4px;
	margin-left: 16px;
	overflow-x: auto;
	scrollbar-width: none;
	-ms-overflow-style: none;
}

.yt-navbar-left::-webkit-scrollbar {
	display: none;
}

.yt-navbar-link {
	padding: 10px 12px;
	background: none;
	border: none;
	border-radius: 16px;
	color: var(--yt-player-text-primary);
	font-size: 13px;
	font-weight: 500;
	white-space: nowrap;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	cursor: pointer;
	transition: all 0.1s ease;
	transform-origin: center center;
	-webkit-tap-highlight-color: transparent;
}

.yt-navbar-link:active {
	color: var(--yt-player-accent-primary);
	scale: 0.9;
}

.yt-navbar-link.active {
	color: var(--yt-player-accent-primary);
	font-weight: bold;
}

.yt-navbar-right {
	display: flex;
	flex-shrink: 0;
	align-items: center;
	gap: 8px;
	margin-right: 12px;
}

.yt-navbar-icon-button {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 48px;
	height: 48px;
	background: none;
	border: none;
	border-radius: 50%;
	cursor: pointer;
	transition: background-color 0.2s ease;
	-webkit-tap-highlight-color: transparent;
}

.yt-navbar-icon-button svg {
	fill: var(--yt-player-text-primary);
	transition: fill 0.2s ease;
}

.yt-navbar-icon-button:active {
	background-color: var(--yt-player-accent-secondary);
	transform: scale(0.9);
}

@media (max-width: 480px) {
	.yt-custom-navbar {
		padding: 0;
	}

	.yt-navbar-left {
		gap: 2px;
		margin-left: 8px;
	}

	.yt-navbar-link {
		font-size: 12px;
	}

	.yt-navbar-right {
		gap: 4px;
	}

	.yt-navbar-icon-button {
		width: 44px;
		height: 44px;
	}
}

/* === DRAWER HANDLE === */

.yt-drawer-drag-handle {
	position: relative;
	display: flex;
	flex-direction: column;
	align-items: center;
	height: 70px;
	padding: 8px 16px 0;
	background-color: var(--yt-player-handle-bg);
	color: var(--yt-player-handle-text-primary);
	border-top-left-radius: 12px;
	border-top-right-radius: 12px;
	box-shadow: 0 -2px 10px var(--yt-player-shadow-light);
	cursor: grab;
	opacity: 1;
	pointer-events: auto;
	user-select: none;
	transition: opacity 0.3s ease-out, height 0.1s ease-out, padding-top 0.3s ease-out,
		padding-bottom 0.3s ease-out, background-color 0.3s ease, border-radius 0.3s ease,
		box-shadow 0.2s ease;
}

.yt-drawer-drag-handle:active {
	cursor: grabbing;
}

.yt-drawer-full .yt-drawer-drag-handle {
	box-shadow: 0 -2px 10px var(--yt-player-shadow-heavy);
}

.yt-drawer-drag-cue {
	position: absolute;
	top: 10px;
	width: 40px;
	height: 4px;
	margin-bottom: -6px;
	background-color: var(--yt-player-handle-cue-bg);
	border-radius: 2px;
	flex-shrink: 0;
	transition: margin-bottom 0.3s ease-out;
}

.yt-drawer-header-content {
	position: relative;
	display: flex;
	flex-direction: column;
	flex-grow: 1;
	align-items: start;
	justify-content: center;
	width: 100%;
	overflow: hidden;
	text-align: center;
}

.yt-playlist-subheader-container {
	display: flex;
	align-items: center;
	justify-content: center;
}

.yt-playlist-restore-all-button {
	display: none;
	margin-left: 10px;
	padding: 2px 5px;
	background-color: var(--yt-player-restore-button-bg);
	border: none;
	border-radius: 4px;
	color: var(--yt-player-restore-button-text);
	font-size: 12px;
	cursor: pointer;
	transition: background-color 0.2s;
}

.yt-player-wrapper.yt-mix-items-removed .yt-playlist-restore-all-button {
	display: inline-block;
}

.yt-player-wrapper.drawer-closed .yt-playlist-restore-all-button {
	display: none !important;
}

.yt-drawer-header {
	width: 100%;
	color: var(--yt-player-handle-text-primary);
	font-size: calc(15px * var(--yt-font-size-multiplier));
	font-weight: 500;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	text-align: left;
	transition: font-size 0.1s ease-out;
}

.yt-drawer-subheader {
	max-height: 20px;
	margin-top: 2px;
	color: var(--yt-player-handle-text-secondary);
	font-size: calc(12px * var(--yt-font-size-multiplier));
	opacity: 1;
	transition: opacity 0.1s ease-out, max-height 0.1s ease-out, margin-top 0.1s ease-out;
}

.yt-drawer-close-button {
	position: absolute;
	top: 10px;
	right: 16px;
	display: none;
	padding: 4px;
	background: none;
	background-color: var(--yt-player-handle-bg);
	border: none;
	color: var(--yt-player-handle-text-secondary);
	font-size: 24px;
	line-height: 1;
	cursor: pointer;
	-webkit-tap-highlight-color: transparent;
}

.yt-drawer-focus-current-button {
	position: absolute;
	right: 0;
	opacity: 0;
	display: none;
	pointer-events: none;
	padding: 4px;
	background: none;
	border: none;
	color: var(--yt-player-handle-text-secondary);
	background-color: var(--yt-player-handle-bg);
	height: 100%;
	cursor: pointer;
}

.yt-drawer-focus-current-button svg {
	width: 24px;
	height: 24px;
	fill: currentColor;
}

.yt-drawer-focus-current-button.visible {
	display: block;
}

/* Drawer Open States */
.yt-player-wrapper:not(.drawer-closed) .yt-drawer-drag-handle {
	border-top-left-radius: 0;
	border-top-right-radius: 0;
}

/* Drawer Closed States */
.yt-player-wrapper.drawer-closed .yt-drawer-drag-handle {
	flex-direction: row;
	align-items: center;
	justify-content: center;
	height: 48px;
	padding-top: 0;
	padding-bottom: 0;
	background-color: var(--yt-player-handle-closed-bg);
}

.yt-player-wrapper.drawer-closed .yt-drawer-drag-cue {
	margin-bottom: 0;
}

.yt-player-wrapper.drawer-closed .yt-drawer-header-content {
	position: absolute;
	top: 50%;
	left: 16px;
	display: flex;
	flex-direction: column;
	align-items: flex-start;
	width: auto;
	opacity: 1;
	line-height: 1.2;
	transform: translateY(-50%);
}

.yt-player-wrapper.drawer-closed .yt-drawer-header {
	margin: 0;
	padding: 0;
	font-size: calc(12px * var(--yt-font-size-multiplier));
}

.yt-player-wrapper.drawer-closed .yt-drawer-playing-next-label {
	margin-bottom: 2px;
	font-size: calc(10px * var(--yt-font-size-multiplier));
	opacity: 0.7;
	pointer-events: none;
}

.yt-player-wrapper.drawer-closed .yt-drawer-track-title {
	max-width: calc(100vw - 120px);
	font-size: calc(12px * var(--yt-font-size-multiplier));
	font-weight: 500;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	pointer-events: none;
}

.yt-player-wrapper.drawer-closed .yt-drawer-subheader {
	max-height: 0;
	margin-top: 0;
	opacity: 0;
	pointer-events: none;
}

/* Animation Disabled */
.yt-player-wrapper.yt-animations-disabled .yt-drawer-drag-handle,
.yt-player-wrapper.yt-animations-disabled .yt-drawer-drag-handle *,
.yt-player-wrapper.yt-animations-disabled .yt-player-drawer,
.yt-player-wrapper.yt-animations-disabled .yt-player-drawer * {
	transition: none !important;
}

/* === PLAYLIST DRAWER === */

.yt-player-drawer {
	position: relative;
	height: var(--drawer-height-px, 0);
	padding: 0;
	background-color: var(--yt-player-playlist-bg);
	border-bottom: 0px solid var(--yt-player-playlist-border);
	opacity: 1;
	overflow: hidden;
	pointer-events: auto;
	transition: opacity 0.3s ease-out, height 0.3s ease-out;
}

.yt-playlist-loading .yt-playlist-wrapper {
	opacity: 0;
}

.yt-playlist-spinner {
	position: absolute;
	top: 50%;
	left: 50%;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	color: var(--yt-player-playlist-text-primary);
	opacity: 0;
	pointer-events: none;
	transform: translate(-50%, -50%);
	transition: opacity 1s ease;
}

.yt-playlist-loading .yt-playlist-spinner {
	opacity: 1;
	pointer-events: all;
}

.yt-playlist-spinner .yt-spinner {
	width: 50px;
	height: 50px;
}

.yt-playlist-reload-container {
	opacity: 0;
	transition: opacity 0.5s ease-in-out;
}

.yt-playlist-loading .yt-playlist-reload-container {
	opacity: 1;
	transition-delay: 6s;
}

.yt-playlist-reload-container button {
	padding: 20px;
	text-decoration: underline;
}

.yt-playlist-wrapper {
	position: relative;
	width: 100%;
	height: 100%;
	background-color: var(--yt-player-playlist-bg);
	box-shadow: inset 0 -2px 8px var(--yt-player-shadow-medium),
		inset 0 2px 8px var(--yt-player-shadow-medium);
	opacity: 1;
	overflow-y: auto;
	scrollbar-width: thin;
	scrollbar-color: var(--yt-player-playlist-border) transparent;
	transition: opacity 0.3s ease;
}

.yt-playlist-wrapper::-webkit-scrollbar {
	width: 6px;
}

.yt-playlist-wrapper::-webkit-scrollbar-track {
	background: transparent;
}

.yt-playlist-wrapper::-webkit-scrollbar-thumb {
	background: var(--yt-player-playlist-border);
	border-radius: 3px;
}

.yt-playlist-item {
	position: relative;
	display: flex;
	align-items: center;
	min-height: 72px;
	padding: 12px 16px;
	gap: 16px;
	border-bottom: 1px solid var(--yt-player-playlist-border);
	border-left: 3px solid transparent;
	cursor: pointer;
	transition: background-color 0.3s ease, border-left-color 0.3s ease;
	-webkit-tap-highlight-color: transparent;
}

.yt-playlist-item:last-child {
	border-bottom: none;
}

.yt-playlist-item.active {
	background-color: var(--yt-player-accent-primary-alpha-bg);
	border-left-color: var(--yt-player-accent-primary);
	transition: background-color 0.5s ease, border-left-color 0.5s ease;
}

/* Added :active states for touch feedback */
.yt-playlist-item:active {
	background-color: var(--yt-player-playlist-active-bg);
}

.yt-playlist-item.active:active {
	background-color: var(--yt-player-accent-primary-alpha-bg-hover);
}

.yt-playlist-item.context-menu-active {
	background-color: var(--yt-player-playlist-hover-bg);
}

.yt-playlist-item.active.context-menu-active {
	background-color: var(--yt-player-accent-primary-alpha-bg-hover);
}

.yt-playlist-item-thumbnail {
	flex-shrink: 0;
	width: auto;
	height: 54px;
	aspect-ratio: 16 / 9;
	background-color: var(--yt-player-playlist-thumbnail-bg);
	background-size: cover;
	background-position: center;
	border: 1px solid var(--yt-player-playlist-thumbnail-border);
	border-radius: 6px;
}

.yt-playlist-item-info {
	display: flex;
	flex-direction: column;
	flex-grow: 1;
	min-width: 0;
	gap: 4px;
}

.yt-playlist-item-title {
	color: var(--yt-player-playlist-text-primary);
	font-size: calc(14px * var(--yt-font-size-multiplier));
	font-weight: 500;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	line-height: 1.3;
}

.yt-playlist-item-artist {
	color: var(--yt-player-playlist-text-secondary);
	font-size: calc(13px * var(--yt-font-size-multiplier));
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	line-height: 1.3;
}

.yt-playlist-item-duration {
	flex-shrink: 0;
	color: var(--yt-player-text-muted);
	font-size: calc(13px * var(--yt-font-size-multiplier));
	white-space: nowrap;
}

.yt-player-wrapper.hide-durations .yt-playlist-item-duration {
	display: none !important;
}

/* Play Next Indicators */
.playing-now-indicator,
.play-next-indicator,
.repeat-current-indicator {
	position: absolute;
	top: 8px;
	right: 8px;
	z-index: 10;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 20px;
	height: 20px;
	background-color: var(--yt-player-accent-secondary);
	border-radius: 50%;
	color: white;
	opacity: 0;
	visibility: hidden;
	pointer-events: none;
	transition: opacity 0.2s ease, visibility 0.2s ease;
}

.yt-playlist-item.play-next .play-next-indicator,
.yt-playlist-item.repeat-current .repeat-current-indicator {
	opacity: 1;
	visibility: visible;
}

/* Horizontal Playlist Mode */
.yt-playlist-wrapper.horizontal-playlist {
	display: flex;
	flex-direction: row;
	align-items: stretch;
	gap: calc(var(--drawer-height-px) * 0.08);
	padding: calc(var(--drawer-height-px) * 0.06);
	overflow-x: auto;
	overflow-y: hidden;
	scroll-snap-type: x mandatory;
	scroll-behavior: smooth;
}

body.yt-limited-height-mode-navbar-hidden .yt-playlist-wrapper.horizontal-playlist {
	padding-top: calc(2vh + 5px);
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item {
	position: relative;
	display: flex;
	flex-direction: column;
	flex: 0 0 auto;
	align-items: center;
	justify-content: center;
	width: auto;
	height: 100%;
	min-height: 40px;
	max-width: 60vw;
	padding: 0px !important;
	aspect-ratio: 1 / 1;
	border: none;
	border-radius: 8px;
	gap: 0;
	overflow: hidden;
	transform-origin: center;
	scroll-snap-align: center;
	scroll-snap-stop: always;
	/*transition: transform 0ms ease, box-shadow 0ms ease, opacity 0ms ease, aspect-ratio 0ms ease,
		outline 0ms ease, scale 0ms ease, margin 0ms ease;*/
	/* Aspect ratio transition removed to prevent jitter on _scrollActiveItemIntoView() */
	transition: transform 250ms ease 0.2s, box-shadow 250ms ease 0.2s, opacity 250ms ease 0.2s,
		outline 250ms ease 0.2s, scale 250ms ease 0.2s, margin 250ms ease 0.2s;
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.active {
	background-color: var(--yt-player-accent-primary-alpha-bg-hover);
}

.yt-playlist-wrapper.horizontal-playlist.scrolling .yt-playlist-item {
	opacity: 0.6;
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.centered {
	outline: calc(var(--drawer-height-px) * 0.02) solid var(--yt-player-playlist-text-secondary);
	outline-offset: calc(var(--drawer-height-px) * -0.01);
	border-radius: 8px;
	opacity: 1;
	transform: scale(1.06);
	/*transition: transform 250ms ease, box-shadow 250ms ease, opacity 250ms ease,
		aspect-ratio 250ms ease, outline 250ms ease, scale 250ms ease, margin 250ms ease;
*/
}

/* When becoming active - delayed transition */
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.active {
	margin: 0 calc(var(--drawer-height-px) * 0.03);
	outline: calc(var(--drawer-height-px) * 0.03) solid var(--yt-player-accent-primary);
	outline-offset: calc(var(--drawer-height-px) * -0.015);
	border-radius: 8px;
	aspect-ratio: 16/9;
	transform: scale(1.06);
	/*	transition: transform 250ms ease 1s, box-shadow 250ms ease 1s, opacity 250ms ease 1s,
		aspect-ratio 250ms ease 1s, outline 250ms ease 1s, scale 250ms ease 1s, margin 250ms ease 1s;
*/
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item-info,
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item-duration,
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item-artist,
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item-title {
	display: none !important;
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item-thumbnail {
	width: 102% !important;
	height: 102% !important;
	max-width: 102%;
	max-height: 102%;
	aspect-ratio: 1 / 1;
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.active .yt-playlist-item-thumbnail {
	aspect-ratio: 16/9;
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item .play-next-indicator,
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item .repeat-current-indicator,
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.active .playing-now-indicator {
	top: 5%;
	left: 5%;
	z-index: 10;
	width: 90%;
	height: 90%;
	background-color: var(--yt-player-playlist-bg);
	border-radius: 8px;
	color: var(--yt-player-playlist-text-primary);
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.active .playing-now-indicator,
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.repeat-current .repeat-current-indicator,
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.play-next .play-next-indicator {
	opacity: 0.6;
	visibility: visible;
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.active.play-next .playing-now-indicator,
.yt-playlist-wrapper.horizontal-playlist
	.yt-playlist-item.active.repeat-current
	.playing-now-indicator {
	opacity: 0;
	visibility: hidden;
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item .play-next-indicator svg,
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item .repeat-current-indicator svg,
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.active .playing-now-indicator svg {
	width: 50%;
	height: 50%;
}

/* EXPERIMENTAL - SVG mask */
/*.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item .play-next-indicator {
	-webkit-mask-image: linear-gradient(#fff, #fff),
		url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>');
	-webkit-mask-composite: xor;
	-webkit-mask-size: 100% 100%, 80% 80%;
	-webkit-mask-position: center, center;
	-webkit-mask-repeat: no-repeat, no-repeat;
	mask-image: linear-gradient(#fff, #fff),
		url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>');
	mask-composite: exclude;
	mask-size: 100% 100%, 80% 80%;
	mask-position: center, center;
	mask-repeat: no-repeat, no-repeat;
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item .repeat-current-indicator {
	-webkit-mask-image: linear-gradient(#fff, #fff),
		url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"/></svg>');
	-webkit-mask-composite: xor;
	-webkit-mask-size: 100% 100%, 80% 80%;
	-webkit-mask-position: center, center;
	-webkit-mask-repeat: no-repeat, no-repeat;
	mask-image: linear-gradient(#fff, #fff),
		url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"/></svg>');
	mask-composite: exclude;
	mask-size: 100% 100%, 80% 80%;
	mask-position: center, center;
	mask-repeat: no-repeat, no-repeat;
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.active .playing-now-indicator {
	-webkit-mask-image: linear-gradient(#fff, #fff),
		url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M8 5v14l11-7z"/></svg>');
	-webkit-mask-composite: xor;
	-webkit-mask-size: 100% 100%, 80% 80%;
	-webkit-mask-position: center, center;
	-webkit-mask-repeat: no-repeat, no-repeat;
	mask-image: linear-gradient(#fff, #fff),
		url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M8 5v14l11-7z"/></svg>');
	mask-composite: exclude;
	mask-size: 100% 100%, 80% 80%;
	mask-position: center, center;
	mask-repeat: no-repeat, no-repeat;
}

.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item .play-next-indicator svg,
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item .repeat-current-indicator svg,
.yt-playlist-wrapper.horizontal-playlist .yt-playlist-item.active .playing-now-indicator svg {
	opacity: 0;
	pointer-events: none;
}*/

/* Horizontal centered item popup */
.yt-horizontal-centered-item-popup {
	position: absolute;
	top: 8px;
	left: 8px;
	z-index: 10;
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 5px;
	background-color: color-mix(in srgb, var(--yt-player-handle-bg) 80%, transparent);
	border-radius: 8px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
	backdrop-filter: blur(6px);
	opacity: 0;
	pointer-events: none;
	transform: translateY(-4px);
	transition: opacity 120ms ease, transform 120ms ease;
}

.yt-horizontal-centered-item-popup.visible {
	opacity: 1;
	transform: translateY(0);
}

body:not(.yt-limited-height-mode)
	.yt-player-wrapper.drawer-closed
	.yt-horizontal-centered-item-popup.visible,
body.yt-player-body-dragging .yt-horizontal-centered-item-popup.visible {
	opacity: 0 !important;
	transform: translateY(-4px);
}

.yt-centered-thumb {
	flex-shrink: 0;
	height: 48px;
	aspect-ratio: 16/9;
	background-size: cover;
	background-position: center;
	border-radius: 6px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.yt-centered-text {
	display: flex;
	flex-direction: column;
	max-width: 60vw;
	margin-right: 3px;
}

.yt-centered-title,
.yt-centered-artist {
	display: -webkit-box !important;
	height: 1.2em !important;
	color: var(--yt-player-handle-text-primary);
	font-size: calc(14px * var(--yt-font-size-multiplier));
	font-weight: 500;
	line-height: 1.2em !important;
	overflow: hidden !important;
	text-overflow: ellipsis !important;
	-webkit-line-clamp: 1 !important;
	line-clamp: 1 !important;
	-webkit-box-orient: vertical !important;
}

.yt-centered-artist {
	color: var(--yt-player-handle-text-secondary);
	font-size: calc(13px * var(--yt-font-size-multiplier));
	font-weight: normal;
}

/* Horizontal centered item overlay */
.yt-horizontal-centered-item-overlay {
	position: absolute;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	z-index: 10;
	display: flex;
	align-items: center;
	justify-content: flex-start;
	opacity: 0;
	visibility: hidden;
	pointer-events: none;
	transform: translateY(6px);
	transition: opacity 120ms ease, visibility 0s linear 120ms;
	will-change: opacity, transform;
}

.yt-drawer-header-content .yt-horizontal-centered-item-overlay {
	top: -6px;
}

.yt-horizontal-centered-item-overlay.visible {
	opacity: 1;
	visibility: visible;
	animation: ytOverlayFadeInUp 180ms ease-out both;
	transition: opacity 120ms ease;
}

.yt-details-overlay:has(.yt-horizontal-centered-item-overlay.visible)
	> :not(.yt-horizontal-centered-item-overlay),
.yt-player-wrapper:not(.drawer-closed)
	.yt-drawer-drag-handle:not(.dragging)
	.yt-drawer-header-content:has(.yt-horizontal-centered-item-overlay.visible)
	> :not(.yt-horizontal-centered-item-overlay) {
	pointer-events: none;
	animation: ytUnderFadeOut 180ms ease-out both;
	animation-delay: 180ms;
}

.yt-details-overlay:not(:has(.yt-horizontal-centered-item-overlay.visible))
	> :not(.yt-horizontal-centered-item-overlay),
.yt-drawer-header-content:not(:has(.yt-horizontal-centered-item-overlay.visible))
	> :not(.yt-horizontal-centered-item-overlay) {
	pointer-events: auto;
	animation: ytUnderFadeIn 120ms ease-out both;
	animation-delay: 120ms;
}

body:not(.yt-limited-height-mode)
	.yt-player-wrapper.drawer-closed
	.yt-horizontal-centered-item-overlay,
.yt-drawer-drag-handle.dragging .yt-horizontal-centered-item-overlay {
	opacity: 0 !important;
	visibility: hidden !important;
	animation: none !important;
}

.yt-overlay-thumb {
	flex-shrink: 0;
	width: auto;
	height: 48px;
	margin-right: 12px;
	aspect-ratio: 16/9;
	background-size: cover;
	background-position: center;
	border-radius: 6px;
	box-shadow: 0 2px 8px var(--yt-player-shadow-light);
}

.yt-overlay-text {
	display: flex;
	flex-direction: column;
	align-items: start;
	min-width: 0;
	margin: 0;
	gap: 2px;
	text-align: start;
}

.yt-overlay-title {
	width: 100%;
	color: var(--yt-player-text-primary);
	font-size: calc(13px * var(--yt-font-size-multiplier));
	font-weight: 500;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.yt-drawer-header-content .yt-horizontal-centered-item-overlay .yt-overlay-title {
	color: var(--yt-player-handle-text-primary);
}

.yt-overlay-artist {
	width: 100%;
	color: var(--yt-player-text-secondary);
	font-size: calc(12px * var(--yt-font-size-multiplier));
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.yt-drawer-header-content .yt-horizontal-centered-item-overlay .yt-overlay-artist {
	color: var(--yt-player-handle-text-secondary);
}

/* Playlist Appearance Modes */
.yt-player-wrapper.playlist-density-compact .yt-playlist-item {
	min-height: 60px;
	padding: 8px 16px;
	gap: 12px;
}

.yt-player-wrapper.playlist-density-compact .yt-playlist-item-thumbnail {
	height: 45px;
}

.yt-player-wrapper.playlist-density-compact .yt-playlist-item-title {
	font-size: calc(13px * var(--yt-font-size-multiplier));
}

.yt-player-wrapper.playlist-density-compact .yt-playlist-item-duration {
	font-size: calc(11px * var(--yt-font-size-multiplier));
}

.yt-player-wrapper.playlist-density-compact .yt-playlist-item-artist {
	font-size: calc(11px * var(--yt-font-size-multiplier));
}

.yt-player-wrapper.playlist-multiline-titles .yt-playlist-item-title {
	white-space: normal;
}

/* === PLAYER CONTROLS === */

.yt-player-controls {
	display: flex;
	flex-direction: column;
	width: 100%;
	padding: 0px 0px 12px;
	gap: 12px;
	background: var(--yt-player-bg-primary);
	backdrop-filter: blur(10px);
	pointer-events: auto;
}

.yt-player-controls.compact {
	flex-direction: row;
	align-items: center;
	justify-content: center;
	padding: 16px 24px;
	gap: 16px;
}

.yt-player-wrapper.yt-player-wrapper.no-playlist .yt-player-controls,
.yt-player-wrapper.yt-player-wrapper.playlist-mode-disabled .yt-player-controls {
	box-shadow: var(--yt-player-shadow-light) 0px -2px 10px;
}

/* Playing Details Section */
.yt-playing-details {
	position: relative;
	display: flex;
	flex-direction: column;
	gap: 8px;
	cursor: pointer;
	user-select: none;
}

.yt-player-controls.compact .yt-playing-details {
	flex: 1;
	min-width: 0;
	cursor: default;
}

.yt-player-controls.compact .yt-video-author-compact {
	display: inline-block;
	margin-left: 2px;
	padding-left: 4px;
	border-left: 2px solid var(--yt-player-text-secondary);
	color: var(--yt-player-text-secondary);
}

.yt-seekbar-background {
	position: absolute;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	background: var(--yt-player-seekbar-bg);
	overflow: visible;
}

.yt-player-controls.compact .yt-seekbar-background {
	display: none;
}

.yt-seekbar-progress {
	position: relative;
	width: 0%;
	height: 100%;
	background: var(--yt-player-accent-primary);
	transition: width 0.1s linear, background-color 0.5s ease;
}

.yt-seekbar-handle {
	position: absolute;
	top: 0;
	right: 0;
	z-index: 3;
	width: 4px;
	height: 100%;
	background-color: var(--yt-player-seekbar-handle);
	box-shadow: 0 0 4px var(--yt-player-shadow-medium);
	opacity: 0;
	cursor: grab;
	transition: opacity 0.2s ease;
}

.yt-seekbar-handle:active {
	cursor: grabbing;
}

.yt-seekbar-background.dragging .yt-seekbar-handle {
	opacity: 1;
}

.yt-details-overlay {
	position: relative;
	z-index: 1;
	display: flex;
	align-items: center;
	height: 100%;
	padding: 12px;
	pointer-events: none;
	transition: opacity 0.15s ease-out;
}

.yt-details-overlay.yt-seeking-active {
	opacity: 0.6;
}

.yt-player-controls.compact .yt-details-overlay {
	padding: 0;
	pointer-events: auto;
}

.yt-thumbnail {
	flex-shrink: 0;
	width: auto;
	height: 100%;
	aspect-ratio: 16 / 9;
	background-size: cover;
	background-position: center;
	border-radius: 6px;
	box-shadow: 0 2px 8px var(--yt-player-shadow-light);
}

.yt-player-controls.compact .yt-thumbnail {
	display: none;
}

.yt-text-content {
	display: flex;
	flex: 1;
	flex-direction: column;
	min-width: 0;
	margin: 0 12px;
	gap: 2px;
}

.yt-video-title {
	position: relative;
	color: var(--yt-player-text-primary);
	font-size: calc(13px * var(--yt-font-size-multiplier));
	font-weight: 500;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	text-shadow: var(--yt-player-text-shadow);
}

@keyframes yt-title-marquee {
	0%,
	20% {
		transform: translateX(0);
	}
	90%,
	100% {
		transform: translateX(calc(-1 * var(--yt-title-marquee-cycle, 0px)));
	}
}

.yt-video-title.marquee .yt-video-title-text {
	display: inline-block;
	will-change: transform;
	animation: yt-title-marquee var(--yt-title-marquee-duration, 18s) linear infinite;
}

.yt-video-title.marquee .yt-video-title-text::after {
	content: attr(data-marquee);
	padding-left: var(--yt-title-marquee-gap, 16px);
}

.yt-player-wrapper.yt-ad-showing .yt-video-title {
	padding-left: 60px;
}

.yt-video-title .yt-ad-indicator {
	position: absolute;
	top: 50%;
	left: 0;
	display: none;
	padding: 2px 5px;
	background-color: #ff0000a6;
	border-radius: 4px;
	color: #ffffff;
	font-size: 60%;
	white-space: nowrap;
	line-height: 1;
	text-align: center;
	vertical-align: middle;
	margin-right: 8px;
	transform: translateY(-50%);
}

.yt-player-wrapper.yt-ad-showing .yt-video-title .yt-ad-indicator {
	display: inline-block;
}

.yt-video-author {
	color: var(--yt-player-text-secondary);
	font-size: calc(12px * var(--yt-font-size-multiplier));
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	text-shadow: var(--yt-player-text-shadow);
}

.yt-video-author-compact {
	display: none;
}

.yt-playback-info {
	display: flex;
	align-items: center;
	margin-top: 2px;
	gap: 12px;
}

.yt-video-timer {
	min-width: 80px;
	color: var(--yt-player-text-secondary);
	font-size: calc(12px * var(--yt-font-size-multiplier));
	white-space: nowrap;
	text-shadow: var(--yt-player-text-shadow);
}

.yt-seekbar-inline {
	position: relative;
	flex: 1;
	height: 4px;
	margin: 5px 0;
	background-color: var(--yt-player-seekbar-track);
	border-radius: 2px;
	cursor: pointer;
	pointer-events: auto;
}

.yt-player-controls:not(.compact) .yt-seekbar-inline {
	display: none;
}

/* Ensure overlay children don't block clicks in non-compact mode */
.yt-player-controls:not(.compact) .yt-details-overlay * {
	pointer-events: none !important;
}

.yt-seekbar-progress-inline {
	position: relative;
	width: 0%;
	height: 100%;
	background-color: var(--yt-player-accent-primary);
	border-radius: 2px;
	transition: width 0.1s linear, background-color 0.5s ease;
}

.yt-seekbar-thumb-inline {
	position: absolute;
	top: 50%;
	right: 0;
	width: 12px;
	height: 12px;
	background-color: var(--yt-player-accent-primary);
	border-radius: 50%;
	opacity: 0;
	cursor: grab;
	transform: translate(50%, -50%);
	transition: opacity 0.2s ease, background-color 0.5s ease;
}

.yt-seekbar-thumb-inline:active {
	cursor: grabbing;
}

.yt-seekbar-inline.dragging .yt-seekbar-thumb-inline {
	opacity: 1;
}

.yt-player-controls:not(.compact) .yt-playing-details {
	width: 100%;
	max-width: none;
	height: 80px;
	min-height: 80px;
	margin: 0;
	align-items: stretch;
}

.yt-player-controls.compact .yt-playing-details {
	flex: 1;
	min-width: 0;
}

/* Main Controls Section */
.yt-main-controls {
	position: relative;
	display: flex;
	align-items: center;
	justify-content: center;
}

.yt-player-controls:not(.compact) .yt-main-controls {
	width: 100%;
}

.yt-button-group {
	display: flex;
	align-items: center;
	height: 56px;
	padding: 6px 0;
	background-color: var(--yt-player-bg-secondary);
	border-radius: 28px;
}

.yt-player-controls:not(.compact) .yt-button-group {
	justify-content: center;
}

/* Added :active states for button group feedback */
.yt-button-group:has(.yt-prev-button:active) {
	background: linear-gradient(
		to right,
		var(--yt-player-bg-pressed) 50%,
		var(--yt-player-bg-secondary) 50%
	);
	transition: background 0.2s ease;
}

.yt-button-group:has(.yt-skip-button:active) {
	background: linear-gradient(
		to right,
		var(--yt-player-bg-secondary) 50%,
		var(--yt-player-bg-pressed) 50%
	);
	transition: background 0.2s ease;
}

.yt-player-wrapper.hide-skip-button .yt-button-group:has(.yt-prev-button:active),
.yt-player-wrapper.hide-prev-button .yt-button-group:has(.yt-skip-button:active) {
	background: var(--yt-player-bg-pressed);
	transition: background-color 0.2s ease;
}

.yt-left-section {
	display: flex;
	align-items: center;
	justify-content: flex-start;
}

.yt-player-controls.compact .yt-left-section {
	margin-right: 10px;
}

.yt-player-controls:not(.compact) .yt-left-section {
	position: absolute;
	top: 50%;
	left: 10px;
	transform: translateY(-50%);
}

.yt-right-section {
	display: flex;
	align-items: center;
	justify-content: flex-start;
}

.yt-player-controls.compact .yt-right-section {
	margin-left: 10px;
}

.yt-player-controls:not(.compact) .yt-right-section {
	position: absolute;
	top: 50%;
	right: 10px;
	transform: translateY(-50%);
}

/* === CONTROL BUTTONS === */

.yt-control-button .icon,
.yt-voice-search-button .icon {
	display: none;
	width: 20px;
	height: 20px;
	fill: currentColor;
}

/* Play/Pause Button States */
.yt-play-button.playing .icon.playing,
.yt-play-button.paused .icon.paused,
.yt-play-button.buffering .icon.buffering {
	display: block !important;
}

.yt-play-button.playing .icon.paused,
.yt-play-button.playing .icon.buffering,
.yt-play-button.paused .icon.playing,
.yt-play-button.paused .icon.buffering,
.yt-play-button.buffering .icon.playing,
.yt-play-button.buffering .icon.paused {
	display: none !important;
}

/* Previous Button States */
.yt-prev-button.previous .icon.previous {
	display: block !important;
}

.yt-prev-button.previous .icon.restart {
	display: none !important;
}

.yt-prev-button.restart .icon.restart {
	display: block !important;
}

.yt-prev-button.restart .icon.previous {
	display: none !important;
}

.yt-skip-button .icon.default {
	display: block !important;
}

.yt-voice-search-button .icon.default {
	display: block !important;
}

/* Repeat Button States */
.yt-repeat-button.off .icon.repeat-off {
	display: block !important;
}

.yt-repeat-button.off .icon.repeat-on {
	display: none !important;
}

.yt-repeat-button.on .icon.repeat-on {
	display: block !important;
}

.yt-repeat-button.on .icon.repeat-off {
	display: none !important;
}

/* Repeat Button */
.yt-repeat-button {
	display: flex;
	align-items: center;
	justify-content: center;
	width: max(30px, min(48px, var(--yt-max-voice-button-width)));
	aspect-ratio: 1 / 1;
	background-color: var(--yt-player-button-normal);
	border: none;
	border-radius: 50%;
	color: var(--yt-player-text-primary);
	cursor: pointer;
	transform: scale(1);
	transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), background-color 0.2s ease,
		color 0.2s ease;
	-webkit-tap-highlight-color: transparent;
}

.yt-repeat-button:active {
	background-color: var(--yt-player-button-active);
	transform: scale(0.92);
}

.yt-repeat-button.on {
	background-color: var(--yt-player-accent-primary);
	color: var(--yt-player-accent-text);
}

.yt-repeat-button.on:active {
	background-color: var(--yt-player-accent-secondary);
	transform: scale(0.92);
}

.yt-repeat-button .icon {
	width: 18px;
	height: 18px;
	fill: currentColor;
}

.yt-player-wrapper.hide-repeat-button .yt-repeat-button {
	display: none !important;
}

.yt-player-wrapper.hide-repeat-button-when-inactive:not(.repeat-active) .yt-repeat-button {
	display: none !important;
}

/* Voice Search Button */
.yt-voice-search-button {
	display: flex;
	align-items: center;
	justify-content: center;
	width: max(30px, min(48px, var(--yt-max-voice-button-width)));
	aspect-ratio: 1 / 1;
	background-color: var(--yt-player-button-normal);
	border: none;
	border-radius: 50%;
	color: var(--yt-player-text-primary);
	cursor: pointer;
	transform: scale(1);
	transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), background-color 0.2s ease,
		color 0.2s ease;
	-webkit-tap-highlight-color: transparent;
}

.yt-voice-search-button:active {
	background-color: var(--yt-player-button-active);
	transform: scale(0.92);
}

.yt-voice-search-button.listening {
	background-color: var(--yt-player-accent-primary);
	color: var(--yt-player-accent-text);
	animation: yt-player-pulse 1.5s infinite;
}

.yt-voice-search-button.listening .icon {
	animation: yt-icon-pulse 1.5s infinite ease-in-out;
}

.yt-voice-search-button.listening:active {
	background-color: var(--yt-player-accent-secondary);
	transform: scale(0.92);
}

.yt-voice-search-button.failed {
	background-color: var(--yt-player-button-failed);
	color: white;
	animation: yt-player-shake 0.5s ease-in-out;
}

.yt-voice-search-button.failed:active {
	background-color: var(--yt-player-button-failed-active);
	transform: scale(0.92);
}

/* Control Buttons */
.yt-control-button {
	position: relative;
	display: flex;
	align-items: center;
	justify-content: center;
	background: none;
	border: none;
	border-radius: 50%;
	color: var(--yt-player-text-primary);
	cursor: pointer;
	transform: scale(1);
	transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), background-color 0.1s ease;
	-webkit-tap-highlight-color: transparent;
}

.yt-control-button:active {
	background-color: var(--yt-player-bg-pressed);
	transform: scale(0.92);
}

.yt-prev-button,
.yt-skip-button {
	width: 44px;
	height: 44px;
	margin: 0 6px;
	color: var(--yt-player-text-secondary);
}

.yt-prev-button.animate .icon.restart {
	animation: yt-player-rewindSpin 0.6s ease-in-out;
}

.yt-play-button {
	z-index: 1;
	width: 64px;
	height: 64px;
	background-color: var(--yt-player-accent-primary);
	border-radius: 50%;
	color: var(--yt-player-accent-text);
	transition: background-color 0.5s ease;
}

.yt-play-button:active {
	background-color: var(--yt-player-accent-secondary);
}

.yt-play-button.buffering {
	background-color: var(--yt-player-button-buffering);
}

.yt-play-button.buffering:active {
	background-color: var(--yt-player-button-buffering-hover);
}

.yt-play-button .icon {
	width: 28px;
	height: 28px;
}

.yt-play-button-container {
	position: relative;
	display: flex;
	align-items: center;
	justify-content: center;
}

.yt-buffer-countdown {
	position: absolute;
	top: -6px;
	right: -6px;
	z-index: 1;
	display: none;
	align-items: center;
	justify-content: center;
	width: 20px;
	height: 20px;
	background-color: var(--yt-player-button-buffering);
	border-radius: 50%;
	box-shadow: 0 2px 4px var(--yt-player-shadow-light);
	color: white;
	font-size: 8px;
	line-height: 1;
	animation: pulse 1s ease-in-out infinite;
}

.yt-buffer-countdown.visible {
	display: flex;
}

.yt-voice-search-button .icon {
	width: 18px;
	height: 18px;
}

/* === LAYOUT SIZES === */

/* Large Layout */
.yt-player-controls.large .yt-playing-details {
	height: 100px;
	min-height: 100px;
}

.yt-player-controls.large .yt-video-title {
	font-size: calc(15px * var(--yt-font-size-multiplier));
}

.yt-player-controls.large .yt-video-author {
	font-size: calc(14px * var(--yt-font-size-multiplier));
}

.yt-player-controls.large .yt-video-timer {
	font-size: calc(13px * var(--yt-font-size-multiplier));
}

.yt-player-controls.large .yt-button-group {
	height: 72px;
	padding: 8px 0;
	border-radius: 36px;
}

.yt-player-controls.large .yt-prev-button,
.yt-player-controls.large .yt-skip-button {
	width: 56px;
	height: 56px;
	margin: 0 8px;
}

.yt-player-controls.large .yt-play-button {
	width: 80px;
	height: 80px;
}

.yt-player-controls.large .yt-repeat-button {
	width: max(35px, min(60px, var(--yt-max-voice-button-width)));
}

.yt-player-controls.large .yt-repeat-button .icon {
	width: 24px;
	height: 24px;
}

.yt-player-controls.large .yt-voice-search-button {
	width: max(35px, min(60px, var(--yt-max-voice-button-width)));
}

.yt-player-controls.large .yt-voice-search-button .icon {
	width: 26px;
	height: 26px;
}

.yt-player-controls.large .yt-play-button .icon {
	width: 36px;
	height: 36px;
}

.yt-player-controls.large .yt-voice-search-button .icon {
	width: 24px;
}

/* Compact Layout */
.yt-player-controls.compact .yt-button-group {
	flex: 0 0 auto;
	height: 40px;
	padding: 2px 0;
	border-radius: 20px;
}

.yt-player-controls.compact .yt-prev-button,
.yt-player-controls.compact .yt-skip-button {
	width: 32px;
	height: 32px;
	margin: 0 4px;
}

.yt-player-controls.compact .yt-play-button {
	width: 44px;
	height: 44px;
}

.yt-player-controls.compact .yt-repeat-button {
	width: max(20px, min(36px, var(--yt-max-voice-button-width)));
}

.yt-player-controls.compact .yt-voice-search-button {
	width: max(20px, min(36px, var(--yt-max-voice-button-width)));
}

.yt-player-controls.compact .yt-control-button .icon,
.yt-player-controls.compact .yt-voice-search-button .icon,
.yt-player-controls.compact .yt-repeat-button .icon {
	width: 14px;
	height: 14px;
}

.yt-player-controls.compact .yt-play-button .icon {
	width: 18px;
	height: 18px;
}

.yt-player-controls.compact .yt-voice-search-button .icon {
	width: 12px;
}

.yt-player-controls.compact .yt-repeat-button .icon {
	width: 12px;
	height: 12px;
}

.yt-player-controls.compact .yt-video-author,
.yt-player-controls.compact .yt-video-timer {
	display: none;
}

/* Timer display modes */
.yt-player-controls.timer-hide .yt-video-timer,
.yt-player-controls.timer-hide:not(.compact) .yt-playback-info,
.yt-player-controls.timer-seek-tooltip .yt-video-timer,
.yt-player-controls.timer-seek-tooltip:not(.compact) .yt-playback-info {
	display: none;
}

.yt-player-controls.timer-hide-duration .yt-video-timer span {
	display: none;
}

.yt-player-controls.timer-hide-duration .yt-seek-tooltip span,
.yt-player-controls.timer-hide-duration .yt-seek-tooltip-inline span {
	display: none;
}

.yt-seek-tooltip,
.yt-seek-tooltip-inline {
	position: absolute;
	padding: 4px 6px;
	border-radius: 4px;
	background: var(--yt-player-bg-secondary);
	color: var(--yt-player-text-primary);
	font-size: calc(12px * var(--yt-font-size-multiplier));
	box-shadow: 0 2px 8px var(--yt-player-shadow-medium);
	pointer-events: none;
	z-index: 9999;
	display: none;
	white-space: nowrap;
}

.yt-seek-tooltip::after,
.yt-seek-tooltip-inline::after {
	content: '';
	position: absolute;
	left: 50%;
	bottom: -8px;
	transform: translateX(calc(-50% - 2px));
	width: 0;
	height: 0;
	z-index: 10000;
	border-left: 8px solid transparent;
	border-right: 8px solid transparent;
	border-top: 8px solid var(--yt-player-shadow-medium);
}

.yt-seek-tooltip {
	transform: translateX(-50%) translateY(-100%);
	top: -15px;
}
.yt-seek-tooltip-inline {
	transform: translateX(-50%);
	bottom: calc(100% + 15px);
}

.yt-player-controls.large .yt-seek-tooltip {
	font-size: calc(13px * var(--yt-font-size-multiplier));
	padding: 6px 8px;
	top: -20px;
}
.yt-player-controls.large .yt-seek-tooltip::after,
.yt-player-controls.large .yt-seek-tooltip-inline::after {
	border-left: 10px solid transparent;
	border-right: 10px solid transparent;
	border-top: 10px solid var(--yt-player-shadow-medium);
	bottom: -10px;
}

.yt-player-controls.timer-hide .yt-seekbar-background.dragging .yt-seek-tooltip {
	display: block;
}
.yt-player-controls.timer-hide .yt-seekbar-inline.dragging .yt-seek-tooltip-inline {
	display: block;
}

/* === CONTEXT MENUS & OVERLAYS === */

.yt-context-menu-overlay {
	position: fixed;
	top: 0;
	left: 0;
	z-index: 10000;
	display: none;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100%;
	background: rgba(0, 0, 0, 0.6);
	opacity: 0;
	transition: opacity 0.2s ease;
}

.yt-context-menu-overlay.visible {
	opacity: 1;
}

.yt-context-menu-modal {
	max-width: 90vw;
	width: 400px;
	max-height: 80vh;
	background: var(--yt-player-bg-primary);
	border-radius: 8px;
	box-shadow: 0 8px 32px var(--yt-player-shadow-heavy);
	overflow: hidden;
	transform: scale(0.9);
	transition: transform 0.2s ease;
}

.yt-context-menu-overlay.visible .yt-context-menu-modal {
	transform: scale(1);
}

.yt-context-menu-header {
	display: flex;
	align-items: center;
	padding: 16px;
	gap: 12px;
	border-bottom: 1px solid var(--yt-player-bg-secondary);
}

.yt-context-menu-thumbnail {
	flex-shrink: 0;
	width: 60px;
	height: 45px;
	background-color: #333;
	background-size: cover;
	background-position: center;
	border-radius: 4px;
	position: relative;
}

.yt-context-menu-video-info {
	flex: 1;
	min-width: 0;
}

.yt-context-menu-title {
	display: -webkit-box;
	color: var(--yt-player-text-primary);
	font-size: 14px;
	font-weight: 500;
	line-height: 1.3;
	overflow: hidden;
	text-overflow: ellipsis;
	-webkit-line-clamp: 2;
	line-clamp: 2;
	-webkit-box-orient: vertical;
}

.yt-context-menu-author {
	color: var(--yt-player-text-secondary);
	font-size: 12px;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.yt-context-menu-duration {
	position: absolute;
	left: 2px;
	bottom: 2px;
	padding: 2px 4px;
	border-radius: 4px;
	background: rgba(0, 0, 0, 0.6);
	color: var(--yt-player-text-primary);
	font-size: 11px;
	line-height: 1;
	white-space: nowrap;
	pointer-events: none;
}

.yt-context-menu-content {
	padding: 8px 0;
	overflow: auto;
	max-height: 50vh;
}

.yt-context-menu-option.separator {
	margin-bottom: 8px;
	padding-bottom: 16px;
	border-bottom: 1px solid var(--yt-player-bg-secondary);
}

.yt-context-menu-option {
	display: flex;
	align-items: center;
	padding: 12px 16px;
	gap: 12px;
	cursor: pointer;
	transition: background-color 0.2s;
}

/* Added :active state for touch feedback */
.yt-context-menu-option:active {
	background-color: var(--yt-player-bg-active);
}

.yt-context-menu-option-icon {
	flex-shrink: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 24px;
	height: 24px;
}

.yt-context-menu-option-icon svg {
	width: 24px;
	height: 24px;
	fill: var(--yt-player-text-primary);
}

.yt-context-menu-option-text {
	flex: 1;
	color: var(--yt-player-text-primary);
	font-size: 14px;
}

.yt-context-menu-details {
	max-height: 300px;
	padding: 8px 0;
	overflow-y: auto;
	scrollbar-width: thin;
	scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

.yt-context-menu-details::-webkit-scrollbar {
	width: 6px;
}

.yt-context-menu-details::-webkit-scrollbar-track {
	background: transparent;
}

.yt-context-menu-details::-webkit-scrollbar-thumb {
	background: rgba(255, 255, 255, 0.2);
	border-radius: 3px;
}

.yt-context-menu-detail-row {
	display: flex;
	flex-direction: column;
	min-height: auto;
	padding: 8px 16px;
	gap: 2px;
	border-bottom: none;
}

.yt-context-menu-detail-row.yt-context-menu-detail-parsed {
	font-size: 12px;
	opacity: 0.8;
}

.yt-context-menu-detail-label {
	color: var(--yt-player-text-secondary);
	font-size: 11px;
	font-weight: 500;
	white-space: nowrap;
	line-height: 1.2;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	opacity: 0.7;
}

.yt-context-menu-detail-parsed .yt-context-menu-detail-label {
	font-size: 10px;
}

.yt-context-menu-detail-value {
	color: var(--yt-player-text-primary);
	font-size: 13px;
	font-weight: 400;
	line-height: 1.4;
	word-break: break-word;
}

.yt-context-menu-detail-parsed .yt-context-menu-detail-value {
	font-size: 11px;
}

.yt-context-menu-detail-separator {
	height: 1px;
	margin: 8px 16px;
	background: var(--yt-player-bg-secondary);
	opacity: 0.5;
}

.yt-context-menu-separator {
	height: 1px;
	margin: 4px 0;
	background: var(--yt-player-bg-secondary);
	opacity: 0.3;
}

/* I'm Feeling Lucky Preview Overlay */
.yt-lucky-preview-overlay {
	position: fixed;
	top: 48px;
	left: 0;
	right: 0;
	bottom: 0;
	z-index: 99999;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--yt-player-playlist-bg);
	overflow: hidden;
}

.yt-lucky-preview-modal {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: space-between;
	height: 100%;
	color: var(--yt-player-playlist-text-primary);
	text-align: center;
}

.yt-lucky-preview-title {
	position: static;
	display: flex;
	align-items: center;
	justify-content: center;
	height: 15vh;
	max-width: 90vw;
	color: var(--yt-player-handle-text-primary);
	font-size: calc(16px * var(--yt-font-size-multiplier));
	font-weight: 800;
	flex: 1 !important;
	flex-direction: column;
	overflow: hidden;
}
.yt-lucky-preview-title-prefix {
	font-weight: normal;
	font-size: calc(14px * var(--yt-font-size-multiplier));
	color: var(--yt-player-handle-text-secondary);
	align-self: flex-start;
	margin-bottom: 5px;
}

.yt-lucky-preview-title-text-wrapper {
	width: 100%;
	overflow: hidden;
	white-space: nowrap;
	position: relative;
}

.yt-lucky-preview-title-text {
	display: inline-block;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 100%;
	vertical-align: bottom;
}

.yt-lucky-preview-title-text-wrapper.marquee {
	flex: none !important;
}

@keyframes yt-lucky-title-marquee {
	0%,
	5% {
		transform: translateX(0);
	}
	100% {
		transform: translateX(calc(-1 * var(--yt-title-marquee-cycle, 0px)));
	}
}

.yt-lucky-preview-title-text-wrapper.marquee .yt-lucky-preview-title-text {
	position: relative;
	white-space: nowrap;
	animation: yt-lucky-title-marquee var(--yt-title-marquee-duration) linear infinite;
	overflow: visible;
	text-overflow: clip;
}

.yt-lucky-preview-title-text-wrapper.marquee .yt-lucky-preview-title-text::after {
	content: attr(data-marquee);
	position: absolute;
	left: var(--yt-title-marquee-cycle);
}

.yt-lucky-preview-center {
	position: relative;
	width: min(60vh, 90vw);
	height: min(60vh, 90vw);
	border-radius: 50%;
	overflow: hidden;
	cursor: pointer;
}

.yt-lucky-preview-thumb {
	display: block;
	width: 100%;
	height: 100%;
	object-fit: cover;
	border-radius: 50%;
	box-shadow: 0 2px 8px var(--yt-player-shadow-light);
}

.yt-lucky-preview-actions {
	display: flex;
	width: 100%;
	height: 15vh;
	gap: 12px;
	align-items: center;
	justify-content: center;
	flex: 1;
}

.yt-lucky-preview-actions .yt-lucky-preview-cancel-link {
	width: 100%;
	display: block;
	border: none;
	cursor: pointer;
	padding: 40px;
	color: var(--yt-player-playlist-text-secondary);
	font-size: calc(13px * var(--yt-font-size-multiplier));
}

.yt-lucky-progress-wrapper {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	pointer-events: none;
	z-index: 2;
}

.yt-lucky-progress-svg {
	width: 100%;
	height: 100%;
	transform: rotate(-90deg);
}
.yt-lucky-countdown-readout {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	display: none;
	align-items: center;
	justify-content: center;
	z-index: 3;
	color: var(--yt-player-handle-text-primary);
	font-size: calc(28px * var(--yt-font-size-multiplier));
	font-weight: 600;
	pointer-events: none;
}
.yt-lucky-countdown-readout {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	display: none;
	align-items: center;
	justify-content: center;
	z-index: 3;
	color: var(--yt-player-handle-text-primary);
	font-size: calc(28px * var(--yt-font-size-multiplier));
	font-weight: 600;
	pointer-events: none;
}

.yt-lucky-progress-bg {
	fill: none;
	stroke: rgba(255, 255, 255, 0.12);
	stroke-width: 3;
}

.yt-lucky-progress-segment {
	fill: none;
	stroke: var(--yt-player-accent-primary);
	stroke-width: 4;
	stroke-linecap: round;
	transition: stroke 0.3s ease;
}

/* === FAVOURITES DIALOG === */

.yt-favourites-dialog-overlay {
	position: fixed;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	z-index: 10000;
	display: flex;
	align-items: flex-end;
	justify-content: center;
	padding: 0;
	background: rgba(0, 0, 0, 0.6);
	opacity: 0;
	transition: opacity 0.3s ease;
}

.yt-favourites-dialog-overlay.visible {
	opacity: 1;
}

.yt-favourites-dialog-modal {
	display: flex;
	flex-direction: column;
	max-width: 500px;
	width: 100%;
	max-height: 80vh;
	background: var(--yt-player-bg-primary);
	border-radius: 16px 16px 0 0;
	box-shadow: 0 -4px 32px var(--yt-player-shadow-heavy);
	overflow: hidden;
	transform: translateY(100%);
	transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.yt-favourites-dialog-modal.search-active {
	height: var(--locked-height);
}

.yt-favourites-dialog-modal.slide-in {
	transform: translateY(0);
}

.yt-favourites-dialog-modal.slide-out {
	transform: translateY(100%);
}

.yt-favourites-dialog-header {
	position: relative;
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 20px 24px 16px;
	border-bottom: 1px solid var(--yt-player-bg-secondary);
}

.yt-favourites-dialog-filter-area {
	display: none;
}

.yt-favourites-dialog-filter-toggle {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	padding: 6px;
	background: none;
	border: none;
	border-radius: 50%;
	color: var(--yt-player-text-secondary);
	cursor: pointer;
	transition: all 0.2s ease;
}

/* Added :active state for touch feedback */
.yt-favourites-dialog-filter-toggle:active {
	background: var(--yt-player-bg-active);
	color: var(--yt-player-text-primary);
}

.yt-favourites-dialog-search-toggle {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	padding: 6px;
	background: none;
	border: none;
	border-radius: 50%;
	color: var(--yt-player-text-secondary);
	cursor: pointer;
	transition: all 0.2s ease;
}

/* Added :active state for touch feedback */
.yt-favourites-dialog-search-toggle:active {
	background: var(--yt-player-bg-active);
	color: var(--yt-player-text-primary);
}

.yt-favourites-dialog-search-container {
	display: none;
	align-items: center;
	width: 100%;
	padding: 0 4px;
	gap: 8px;
}

.yt-favourites-dialog-search-input {
	flex: 1;
	padding: 8px 16px;
	background: var(--yt-player-bg-secondary);
	border: 1px solid var(--yt-player-bg-tertiary);
	border-radius: 20px;
	color: var(--yt-player-text-primary);
	font-size: calc(14px * var(--yt-font-size-multiplier));
	outline: none;
	transition: border-color 0.2s ease;
}

.yt-favourites-dialog-search-input:focus {
	border-color: var(--yt-player-accent-primary);
}

.yt-favourites-dialog-search-input::placeholder {
	color: var(--yt-player-text-secondary);
}

.yt-favourites-dialog-search-clear {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	padding: 4px;
	background: none;
	border: none;
	border-radius: 50%;
	color: var(--yt-player-text-secondary);
	font-size: 18px;
	cursor: pointer;
	transition: all 0.2s ease;
}

/* Added :active state for touch feedback */
.yt-favourites-dialog-search-clear:active {
	background: var(--yt-player-bg-active);
	color: var(--yt-player-text-primary);
}

/* Filter Popup Styles */
.yt-filter-popup-overlay {
	position: fixed;
	top: 0;
	left: 0;
	z-index: 10002;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100%;
	background: rgba(0, 0, 0, 0.7);
	opacity: 0;
	transition: opacity 0.3s ease;
}

.yt-filter-popup-overlay.visible {
	opacity: 1;
}

.yt-filter-popup-modal {
	max-width: 400px;
	width: 100%;
	max-height: 80vh;
	background: var(--yt-player-bg-primary);
	border-radius: 12px;
	box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
	overflow: hidden;
	transform: translateY(20px);
	transition: transform 0.3s ease;
}

.yt-filter-popup-modal.slide-in {
	transform: translateY(0);
}

.yt-filter-popup-modal.slide-out {
	transform: translateY(20px);
}

.yt-filter-popup-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 20px 24px 16px;
	border-bottom: 1px solid var(--yt-player-bg-secondary);
}

.yt-filter-popup-title {
	margin: 0;
	color: var(--yt-player-text-primary);
	font-size: calc(18px * var(--yt-font-size-multiplier));
	font-weight: 600;
}

.yt-filter-popup-close {
	padding: 4px;
	background: none;
	border: none;
	border-radius: 4px;
	color: var(--yt-player-text-secondary);
	font-size: 24px;
	line-height: 1;
	cursor: pointer;
	transition: all 0.2s ease;
}

/* Added :active state for touch feedback */
.yt-filter-popup-close:active {
	background: var(--yt-player-bg-active);
	color: var(--yt-player-text-primary);
}

.yt-filter-popup-content {
	max-height: calc(80vh - 80px);
	padding: 20px 24px 24px;
	overflow-y: auto;
}

.yt-filter-popup-section {
	margin-bottom: 24px;
}

.yt-filter-popup-section:last-child {
	margin-bottom: 0;
}

.yt-filter-popup-section-title {
	margin: 0 0 12px 0;
	color: var(--yt-player-text-primary);
	font-size: calc(14px * var(--yt-font-size-multiplier));
	font-weight: 600;
}

.yt-filter-popup-buttons {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
	gap: 8px;
}

.yt-filter-popup-btn {
	padding: 10px 16px;
	background: var(--yt-player-bg-secondary);
	border: 1px solid var(--yt-player-bg-tertiary);
	border-radius: 8px;
	color: var(--yt-player-text-secondary);
	font-size: calc(12px * var(--yt-font-size-multiplier));
	font-weight: 500;
	text-align: center;
	cursor: pointer;
	transition: all 0.2s ease;
}

/* Added :active state for touch feedback */
.yt-filter-popup-btn:active {
	background: var(--yt-player-bg-tertiary);
	color: var(--yt-player-text-primary);
	border-color: var(--yt-player-accent-primary);
}

.yt-filter-popup-btn.active {
	background: var(--yt-player-accent-primary);
	border-color: var(--yt-player-accent-primary);
	color: white;
}

@media (max-width: 480px) {
	.yt-filter-popup-modal {
		max-width: none;
		width: 100%;
	}

	.yt-filter-popup-header {
		padding: 16px 20px 12px;
	}

	.yt-filter-popup-content {
		padding: 16px 20px 20px;
	}

	.yt-filter-popup-buttons {
		grid-template-columns: repeat(2, 1fr);
		gap: 6px;
	}

	.yt-filter-popup-btn {
		padding: 12px 8px;
		font-size: calc(11px * var(--yt-font-size-multiplier));
	}
}

/* Legacy unused filter styles */
.yt-favourites-dialog-filter-container,
.yt-favourites-dialog-filter-buttons,
.yt-favourites-dialog-filter-btn,
.yt-favourites-dialog-sort-container,
.yt-favourites-dialog-sort-select {
	display: none;
}

.yt-favourites-dialog-title {
	margin: 0;
	color: var(--yt-player-text-primary);
	font-size: calc(15px * var(--yt-font-size-multiplier));
	font-weight: bold;
}

.yt-favourites-dialog-header-right {
	display: flex;
	align-items: center;
	gap: 12px;
}

.yt-favourites-dialog-add-btn {
	display: inline-flex;
	align-items: center;
	height: calc(32px * var(--yt-font-size-multiplier));
	padding: 8px 16px;
	background: var(--yt-player-accent-primary);
	border: none;
	border-radius: 8px;
	color: white;
	font-size: calc(12px * var(--yt-font-size-multiplier));
	font-weight: 500;
	line-height: 1;
	gap: 8px;
	cursor: pointer;
	transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
}

.yt-favourites-dialog-add-btn:active {
	background: var(--yt-player-accent-secondary);
}

.yt-favourites-dialog-add-btn.success {
	background: rgba(0, 255, 0, 0.12);
}

.yt-favourites-dialog-add-btn.info {
	background: var(--yt-player-bg-secondary);
	border: 1px solid var(--yt-player-bg-tertiary);
	color: var(--yt-player-text-primary);
}

.yt-favourites-dialog-add-btn.error {
	background: rgba(255, 0, 0, 0.12);
	border: 1px solid rgba(255, 68, 68, 0.35);
	color: #ff4444;
}

.yt-favourites-dialog-add-btn:disabled {
	opacity: 0.85;
	cursor: default;
	filter: saturate(0.9);
}

.yt-favourites-dialog-close {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	padding: 6px;
	background: none;
	border: none;
	border-radius: 50%;
	color: var(--yt-player-text-secondary);
	cursor: pointer;
	transition: all 0.2s ease;
}

/* Added :active state for touch feedback */
.yt-favourites-dialog-close:active {
	background: var(--yt-player-bg-active);
	color: var(--yt-player-text-primary);
}

.yt-favourites-dialog-content {
	flex: 1;
	padding: 16px 24px 24px;
	overflow-y: auto;
}

.yt-favourites-dialog-actions {
	display: flex;
	align-items: center;
	justify-content: flex-end;
	margin-bottom: 12px;
	gap: 12px;
}

.yt-favourites-feedback {
	display: inline-flex;
	align-items: center;
	padding: 8px 12px;
	gap: 8px;
	background: var(--yt-player-bg-secondary);
	border: 1px solid var(--yt-player-bg-tertiary);
	border-radius: 8px;
	color: var(--yt-player-text-primary);
	font-size: calc(12px * var(--yt-font-size-multiplier));
	animation: ytFadeSlideIn 0.2s ease;
}

.yt-favourites-feedback.success {
	border-color: var(--yt-player-accent-primary);
}

.yt-favourites-feedback.info {
	border-color: var(--yt-player-border);
	color: var(--yt-player-text-secondary);
}

.yt-favourites-feedback.error {
	background: rgba(255, 0, 0, 0.08);
	border-color: rgba(255, 68, 68, 0.35);
	color: #ff4444;
}

.yt-favourites-dialog-list {
	display: flex;
	flex-direction: column;
	gap: 12px;
}

.yt-favourites-dialog-item {
	position: relative;
	display: flex;
	align-items: center;
	padding: 12px;
	gap: 12px;
	background: var(--yt-player-bg-secondary);
	border-radius: 12px;
	transition: background-color 0.2s ease;
}

/* Added :active state for touch feedback */
.yt-favourites-dialog-item:active {
	background: transparent;
}

.yt-favourites-dialog-item-thumbnail {
	position: relative;
	z-index: 10;
	flex-shrink: 0;
	width: 60px;
	height: 45px;
	background: var(--yt-player-bg-tertiary);
	border-radius: 8px;
}

.yt-favourites-dialog-item-thumbnail.stacked::before {
	content: '';
	position: absolute;
	top: -3px;
	right: 3px;
	bottom: 3px;
	left: -3px;
	z-index: 8;
	background: var(--stack-color-1, var(--yt-player-bg-secondary));
	border-radius: 8px;
	opacity: 0.8;
}

.yt-favourites-dialog-item-thumbnail.stacked::after {
	content: '';
	position: absolute;
	top: -6px;
	right: 6px;
	bottom: 6px;
	left: -6px;
	z-index: 7;
	background: var(--stack-color-2, var(--yt-player-bg-primary));
	border-radius: 8px;
	opacity: 0.6;
}

.yt-favourites-dialog-item:active .yt-favourites-dialog-item-thumbnail .play-overlay {
	content: '';
	position: absolute;
	top: 50%;
	left: 50%;
	z-index: 11;
	width: 0;
	height: 0;
	border-top: 5px solid transparent;
	border-bottom: 5px solid transparent;
	border-left: 8px solid rgba(255, 255, 255, 0.9);
	opacity: 1;
	transform: translate(-50%, -50%);
	transition: opacity 0.2s ease;
}

.yt-favourites-dialog-item-info {
	flex: 1;
	min-width: 0;
}

.yt-favourites-dialog-item-title {
	margin-bottom: 4px;
	color: var(--yt-player-text-primary);
	font-size: calc(14px * var(--yt-font-size-multiplier));
	font-weight: 500;
	white-space: nowrap;
	line-height: 1.3;
	overflow: hidden;
	text-overflow: ellipsis;
}

.yt-favourites-dialog-item-meta {
	color: var(--yt-player-text-secondary);
	font-size: calc(12px * var(--yt-font-size-multiplier));
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.yt-favourites-dialog-more-options-btn {
	flex-shrink: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 36px;
	height: 36px;
	padding: 8px;
	background: none;
	border: none;
	border-radius: 50%;
	color: var(--yt-player-text-secondary);
	cursor: pointer;
	transition: all 0.2s ease;
}

.yt-favourites-dialog-more-options-btn svg {
	fill: currentColor;
	transition: inherit;
}

/* Added :active state for touch feedback */
.yt-favourites-dialog-more-options-btn:active {
	background: var(--yt-player-bg-active);
	color: var(--yt-player-text-primary);
}

.yt-favourites-dialog-options-overlay {
	position: absolute;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	z-index: 10;
	display: flex;
	align-items: center;
	justify-content: center;
	background: rgba(0, 0, 0, 0.8);
	border-radius: 12px;
	gap: 12px;
	animation: fadeIn 0.2s ease;
}

.yt-favourites-dialog-overlay-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	min-width: 100px;
	padding: 12px 16px;
	background: var(--yt-player-bg-primary);
	border: 1px solid var(--yt-player-border);
	border-radius: 8px;
	color: var(--yt-player-text-primary);
	font-size: calc(14px * var(--yt-font-size-multiplier));
	font-weight: 500;
	gap: 8px;
	cursor: pointer;
	transition: all 0.2s ease;
}

.yt-favourites-dialog-overlay-btn svg {
	flex-shrink: 0;
	fill: currentColor;
}

/* Added :active state for touch feedback */
.yt-favourites-dialog-overlay-btn:active {
	background: var(--yt-player-bg-active);
	transform: translateY(-1px);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.yt-favourites-dialog-overlay-remove-btn:active {
	background: rgba(255, 0, 0, 0.1);
	border-color: rgba(255, 68, 68, 0.3);
	color: #ff4444;
}

.yt-mix-badge {
	display: inline-flex;
	flex-shrink: 0;
	align-items: center;
	justify-content: center;
	margin-right: 0.5em;
	padding: 0.4em 0.6em;
	background: var(--yt-player-handle-text-primary);
	border-radius: 4px;
	color: var(--yt-player-handle-bg);
	font-size: calc(0.7em * var(--yt-font-size-multiplier));
	font-weight: 500;
	white-space: nowrap;
	line-height: 1;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	vertical-align: bottom;
	pointer-events: none;
}

.yt-favourites-dialog-item-title .yt-mix-badge {
	margin-right: 0.4em;
	padding: 0.15em 0.4em;
	border-radius: 3px;
	font-size: calc(0.65em * var(--yt-font-size-multiplier));
	vertical-align: middle;
}

.yt-add-to-favourites-dropdown {
	min-width: 180px;
	background: var(--yt-player-bg-primary);
	border: 1px solid var(--yt-player-border-primary);
	border-radius: 8px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
	overflow: hidden;
}

.yt-dropdown-option {
	display: block;
	width: 100%;
	padding: 12px 16px;
	background: transparent;
	border: none;
	color: var(--yt-player-text-primary);
	font-size: calc(14px * var(--yt-font-size-multiplier));
	font-weight: 500;
	text-align: left;
	cursor: pointer;
	transition: background-color 0.2s ease;
}

/* Added :active state for touch feedback */
.yt-dropdown-option:active {
	background: var(--yt-player-bg-tertiary);
}

.yt-favourites-dialog-rename-input {
	width: 100%;
	padding: 4px 8px;
	background: var(--yt-player-bg-primary);
	border: 2px solid var(--yt-player-accent-primary);
	border-radius: 4px;
	color: var(--yt-player-text-primary);
	font-size: calc(14px * var(--yt-font-size-multiplier));
	font-weight: 500;
	font-family: inherit;
	outline: none;
}

.yt-favourites-dialog-rename-input:focus {
	border-color: var(--yt-player-accent-secondary);
}

.yt-favourites-dialog-empty {
	padding: 32px 16px;
	color: var(--yt-player-text-secondary);
	font-size: calc(14px * var(--yt-font-size-multiplier));
	text-align: center;
}

@media (min-width: 768px) {
	.yt-favourites-dialog-overlay {
		align-items: center;
		padding: 16px;
	}

	.yt-favourites-dialog-modal {
		max-width: 480px;
		border-radius: 16px;
		transform: scale(0.9) translateY(20px);
	}

	.yt-favourites-dialog-modal.slide-in {
		transform: scale(1) translateY(0);
	}

	.yt-favourites-dialog-modal.slide-out {
		transform: scale(0.9) translateY(20px);
	}

	.yt-favourites-dialog-header::before {
		display: none;
	}
}

/* === LIMITED HEIGHT MODE === */

body.yt-limited-height-mode,
body.yt-limited-height-mode .watch-below-the-player {
	overflow-y: hidden !important;
	overflow-x: hidden !important;
}

body.yt-limited-height-mode-navbar-hidden .yt-player-wrapper {
	height: 100%;
}

body.yt-limited-height-mode .yt-drawer-drag-handle {
	display: none !important;
}

body.yt-limited-height-mode .yt-player-drawer {
	max-height: 100% !important;
	height: 60% !important;
	border-bottom: 1px solid var(--yt-player-playlist-border);
}

body.yt-limited-height-mode .yt-player-controls {
	height: 40%;
}

.yt-limited-height-fab {
	position: relative;
	display: none;
	align-items: center;
	justify-content: center;
	width: max(20px, min(36px, var(--yt-max-voice-button-width)));
	aspect-ratio: 1/1;
	border: none;
	cursor: pointer;
	-webkit-tap-highlight-color: transparent;
}

.yt-limited-height-fab-main {
	position: relative;
	z-index: 1;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100%;
	background-color: var(--yt-player-button-normal);
	border: none;
	border-radius: 50%;
	fill: var(--yt-player-text-primary);
	cursor: pointer;
}

.yt-speed-dial,
.yt-limited-height-fab-main {
	width: 100%;
	height: 100%;
}

.yt-speed-dial-open .yt-limited-height-fab-main {
	background-color: var(--yt-player-button-active);
	fill: var(--yt-player-accent-primary);
	scale: 1.2;
}

.yt-limited-height-fab-main svg path {
	transition: transform 0.2s ease;
}

.yt-speed-dial-open .yt-limited-height-fab-main svg path:first-child {
	transform: translateX(10px);
}

.yt-speed-dial-open .yt-limited-height-fab-main svg path:last-child {
	transform: translateX(-10px);
}

.yt-limited-height-fab-actions {
	position: absolute;
	right: 0;
	bottom: 50%;
	z-index: 100;
	display: flex;
	flex-direction: row;
	padding: 14px;
	gap: 14px;
	background: var(--yt-player-bg-primary);
	border-radius: 50px;
	opacity: 0;
	pointer-events: none;
	transform: translateY(50%);
	transition: right 0.3s ease-out, opacity 0.3s ease-out;
}

.yt-speed-dial-open .yt-limited-height-fab-actions {
	right: calc(100% + 8px);
	opacity: 1;
	pointer-events: all;
}

.yt-limited-height-fab-action {
	position: relative;
	z-index: 1;
	display: flex;
	align-items: center;
	justify-content: center;
	width: max(20px, min(36px, var(--yt-max-voice-button-width)));
	height: max(20px, min(36px, var(--yt-max-voice-button-width)));
	background-color: var(--yt-player-button-normal);
	border: none;
	border-radius: 50%;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
	fill: var(--yt-player-text-primary);
	cursor: pointer;
	opacity: 0;
	transform: translateX(20px);
	transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease-out;
	-webkit-tap-highlight-color: transparent;
}

.yt-limited-height-fab-action[data-action='home'] {
	width: auto;
	height: auto;
	background-color: transparent;
	box-shadow: none;
}

.yt-limited-height-fab-action[data-action='home'] svg {
	height: calc(max(20px, min(36px, var(--yt-max-voice-button-width))) - 5px);
}

.yt-limited-height-fab-action[data-action='home'] svg g path:first-child {
	fill: var(--yt-player-accent-primary);
}

.yt-speed-dial-open .yt-limited-height-fab-action {
	opacity: 1;
	transform: translateX(0);
}

.yt-speed-dial-open .yt-limited-height-fab-action:nth-child(1) {
	transition-delay: 0.05s;
}

.yt-speed-dial-open .yt-limited-height-fab-action:nth-child(2) {
	transition-delay: 0.1s;
}

.yt-speed-dial-open .yt-limited-height-fab-action:nth-child(3) {
	transition-delay: 0.15s;
}

.yt-speed-dial-open .yt-limited-height-fab-action:nth-child(4) {
	transition-delay: 0.2s;
}

.yt-speed-dial-open .yt-limited-height-fab-action:nth-child(5) {
	transition-delay: 0.25s;
}

.yt-limited-height-fab-action:active {
	background-color: var(--yt-player-button-active);
	transform: scale(0.88);
}

.yt-limited-height-mode-navbar-hidden .yt-voice-search-button {
	display: none !important;
}

.yt-limited-height-mode-navbar-hidden .yt-limited-height-fab {
	display: flex !important;
}

/* === VISIBILITY & DISPLAY MODES === */

body.yt-hide-video-player #player-container-id,
body.yt-hide-video-player .player-placeholder {
	position: absolute !important;
	z-index: -100 !important;
	height: 0 !important;
	opacity: 0 !important;
}

body.yt-hide-video-player ytm-app.sticky-player {
	padding: 0 !important;
}

.yt-player-wrapper.no-playlist .yt-drawer-drag-handle,
.yt-player-wrapper.no-playlist .yt-player-drawer,
.yt-player-wrapper.playlist-mode-disabled .yt-drawer-drag-handle,
.yt-player-wrapper.playlist-mode-disabled .yt-player-drawer {
	display: none !important;
}

.yt-player-wrapper.hide-prev-button .yt-prev-button {
	display: none !important;
}

.yt-player-wrapper.hide-skip-button .yt-skip-button {
	display: none !important;
}

.yt-player-wrapper.bottom-controls-hidden .yt-main-controls {
	display: none !important;
}

.yt-player-wrapper.bottom-controls-hidden .yt-player-controls:not(.compact) {
	padding-bottom: 0;
}

/* Playlist Modes */
.yt-player-wrapper.playlist-fixed-below-video .yt-drawer-drag-cue,
.yt-player-wrapper.playlist-fixed-below-video .yt-drawer-close-button {
	display: none !important;
}

.yt-player-wrapper.playlist-fixed-below-video .yt-drawer-drag-handle {
	display: flex;
	flex-direction: column;
	align-items: flex-start;
	justify-content: center;
	height: 70px;
	padding: 0 16px;
	cursor: default;
}

.yt-player-wrapper.playlist-fixed-below-video .yt-drawer-header-content {
	position: static;
	width: 100%;
	opacity: 1;
	transform: none;
}

.yt-player-wrapper.playlist-fixed-below-video .yt-player-drawer {
	pointer-events: none;
}

.yt-player-wrapper.playlist-always-open .yt-drawer-drag-cue,
.yt-player-wrapper.playlist-always-open .yt-drawer-close-button {
	display: none !important;
}

.yt-player-wrapper.playlist-always-open .yt-drawer-drag-handle {
	display: flex;
	flex-direction: column;
	align-items: flex-start;
	justify-content: center;
	height: 70px;
	padding: 0 16px;
	cursor: default;
}

.yt-player-wrapper.playlist-always-open .yt-drawer-header-content {
	position: static;
	width: 100%;
	opacity: 1;
	transform: none;
}

.yt-player-wrapper.playlist-always-open .yt-drawer-header {
	max-height: 20px;
	margin-top: 2px;
	font-size: 16px;
	opacity: 1;
}

/* === BODY & GLOBAL STATES === */

body.yt-player-body-dragging {
	user-select: none !important;
	-webkit-user-select: none !important;
	-ms-user-select: none !important;
}

body.yt-custom-controls-drawn .voice-search-dialog-container .voice-search-mic-section {
	position: relative !important;
	top: calc(-1 * var(--yt-player-controls-height, 200px)) !important;
}

body.yt-custom-controls-drawn .yt-searchbox-suggestions-container {
	height: calc(100% - var(--yt-player-controls-height, 500px));
}

body.yt-custom-playlist-active ytm-engagement-panel:has(.engagement-panel-playlist),
body.yt-auto-continue-active #dialog-container,
body.yt-custom-controls-drawn.yt-custom-voice-search-active
	.voice-search-dialog-container
	.voice-search-mic-section,
body.yt-custom-controls-drawn.yt-custom-voice-search-active .voice-search-mic-container {
	z-index: -1 !important;
	opacity: 0 !important;
}

body.yt-native-search-suggestions .yt-player-wrapper .yt-drawer-drag-handle,
body.yt-native-search-suggestions .yt-player-wrapper .yt-player-drawer,
body.yt-native-search-dialog .yt-player-wrapper .yt-drawer-drag-handle,
body.yt-native-search-dialog .yt-player-wrapper .yt-player-drawer {
	opacity: 0;
	pointer-events: none;
}

.yt-custom-navbar-active ytm-mobile-topbar-renderer {
	background: transparent !important;
}

.yt-custom-navbar-active .mobile-topbar-header {
	display: none !important;
}

.yt-custom-navbar-active .mobile-topbar-header[data-mode='searching'] {
	display: flex !important;
}

.yt-custom-navbar-active {
	padding-top: 48px;
}

.dragging:not(.yt-drawer-drag-handle),
.dragging *:not(.yt-drawer-drag-handle *) {
	transition: none !important;
}

/* === NATIVE ELEMENT OVERRIDES === */

bottom-sheet-container {
	z-index: 1000;
}

bottom-sheet-container[role='dialog'] {
	z-index: 1000;
}

.page-container {
	padding-top: 48px;
}

.html5-video-container {
	top: 0 !important;
}

body.yt-fixed-video-height:not([faux-fullscreen='true']) #player,
body.yt-fixed-video-height:not([faux-fullscreen='true']) .html5-video-player,
body.yt-fixed-video-height:not([faux-fullscreen='true']) .html5-video-player video,
body.yt-fixed-video-height:not([faux-fullscreen='true']) #player-control-overlay,
body.yt-fixed-video-height:not([faux-fullscreen='true']) .ytp-player-content,
body.yt-fixed-video-height:not([faux-fullscreen='true']) .player-placeholder {
	height: calc(30vh - 48px) !important;
	padding-bottom: 0 !important;
}

body.yt-limited-height-mode:not([faux-fullscreen='true']) #player,
body.yt-limited-height-mode:not([faux-fullscreen='true']) .html5-video-player,
body.yt-limited-height-mode:not([faux-fullscreen='true']) .html5-video-player video,
body.yt-limited-height-mode:not([faux-fullscreen='true']) #player-control-overlay,
body.yt-limited-height-mode:not([faux-fullscreen='true']) .ytp-player-content,
body.yt-limited-height-mode:not([faux-fullscreen='true']) .player-placeholder {
	height: calc(100vh - var(--yt-player-controls-height) - 48px) !important;
}

body.yt-fixed-video-height:not([faux-fullscreen='true']) .html5-video-player video {
	object-fit: contain !important;
}

body.yt-custom-navbar-active .page-container {
	padding-top: 0;
}

body.yt-custom-controls-drawn:not(.yt-limited-height-mode) .watch-below-the-player {
	height: calc(var(--yt-player-wrapper-height) - var(--yt-video-height)) !important;
	padding-top: 0;
	overflow-x: hidden !important;
	overflow-y: auto !important;
}

/* Only adjust height when auto-hide is NOT active */
body.yt-custom-controls-drawn:not(.yt-auto-hide-active) .watch-below-the-player {
	height: calc(var(--yt-below-player-height, 150px) - 0px) !important;
}

ytm-related-chip-cloud-renderer {
	position: unset !important;
	display: block !important;
	height: auto !important;
	opacity: 1 !important;
	pointer-events: auto !important;
	transform: translateY(0) !important;
	transition: none !important;
}

.below-the-player-cinematic-container {
	display: none;
}

.related-chips-slot-wrapper.slot-open {
	transform: translateY(0) !important;
	transition: none !important;
}

body.yt-custom-controls-drawn .player-size {
	margin-top: -48px;
}

body.yt-custom-controls-drawn ytm-engagement-panel {
	top: calc(
		var(--yt-player-wrapper-height) + 48px -
			(var(--yt-player-mid-drawer-height) + var(--yt-player-controls-height) + 70px)
	);
	height: calc(var(--yt-player-mid-drawer-height) + 70px);
}

body.yt-custom-controls-drawn.yt-auto-hidden-player ytm-engagement-panel,
body.yt-custom-controls-drawn.yt-player-hide-for-panel-active ytm-engagement-panel {
	height: calc(var(--yt-player-wrapper-height) - var(--yt-video-height)) !important;
}

body.yt-custom-controls-drawn ytm-engagement-panel:not(:has(.engagement-panel-playlis)) {
	z-index: 1000;
}

ytm-engagement-panel .ytWebScrimHostModernOverlay {
	pointer-events: none !important;
}

ytm-structured-description-content-renderer {
	overflow-y: auto !important;
}

body.yt-custom-controls-drawn ytm-playlist-panel-entry-point {
	position: fixed !important;
	right: 0 !important;
	bottom: calc(var(--yt-player-controls-height) + 20px) !important;
	left: 0 !important;
	margin: 0 20px !important;
	cursor: pointer;
}

body.yt-custom-playlist-active ytm-playlist-panel-entry-point {
	opacity: 0 !important;
	pointer-events: none !important;
}

.slim-video-metadata-header .slim-video-information-title .yt-core-attributed-string {
	display: -webkit-box !important;
	display: flex !important;
	height: 2.4em !important;
	line-height: 1.2em !important;
	overflow: hidden !important;
	text-overflow: ellipsis !important;
	-webkit-line-clamp: 2 !important;
	line-clamp: 2 !important;
	-webkit-box-orient: vertical !important;
}

.engagement-panel-section-list-background {
	background-color: white !important;
}

.engagement-panel-container {
	border-radius: 0 !important;
}

.engagement-panel-section-list-header-wrapper {
	position: relative !important;
	padding: 10px 16px !important;
	background-color: var(--yt-player-handle-bg) !important;
	box-shadow: 0 -2px 10px var(--yt-player-shadow-light) !important;
	color: var(--yt-player-handle-text-primary) !important;
	opacity: 1 !important;
	cursor: grab !important;
	pointer-events: auto !important;
	user-select: none !important;
}

.engagement-panel-section-list-header {
	position: relative !important;
	padding: 0 !important;
	border: 0 !important;
}

.engagement-panel-drag-line {
	position: absolute !important;
	top: 10px !important;
	left: 50% !important;
	width: 40px !important;
	height: 4px !important;
	margin-bottom: -6px !important;
	background: var(--yt-player-handle-cue-bg) !important;
	border-radius: 2px !important;
	opacity: 1 !important;
	flex-shrink: 0 !important;
	transform: translateX(-50%) !important;
}

ytm-engagement-panel-section-list-renderer .engagement-panel-section-list-header-title {
	color: var(--yt-player-handle-text-primary) !important;
	font-size: calc(15px * var(--yt-font-size-multiplier)) !important;
	font-weight: 500 !important;
	white-space: nowrap !important;
	overflow: hidden !important;
	text-overflow: ellipsis !important;
	text-align: left !important;
	transition: font-size 0.1s ease-out !important;
}

.engagement-panel-section-list-header ytm-button-renderer.close-button {
	transform: scale(0.8);
}

.engagement-panel-section-list-header ytm-button-renderer.close-button button {
	color: var(--yt-player-handle-text-primary) !important;
}

.engagement-panel-content-wrapper ytm-comment-simplebox-renderer {
	transform: scale(0.9) !important;
}

ytm-structured-description-content-renderer .yt-core-attributed-string {
	font-size: calc(14px * var(--yt-font-size-multiplier)) !important;
}

.playlist-entrypoint-background-protection {
	pointer-events: none !important;
}

/* === ANIMATIONS & KEYFRAMES === */

@keyframes yt-player-pulse {
	0% {
		box-shadow: 0 0 0 0px var(--yt-player-accent-text-pulse);
	}
	70% {
		box-shadow: 0 0 0 12px rgba(0, 0, 0, 0);
	}
	100% {
		box-shadow: 0 0 0 0px var(--yt-player-accent-text-pulse);
	}
}

@keyframes yt-icon-pulse {
	0%,
	100% {
		opacity: 1;
		transform: scale(1);
	}
	50% {
		opacity: 0.8;
		transform: scale(1.15);
	}
}

@keyframes yt-player-shake {
	0%,
	100% {
		transform: translateY(0);
	}
	25% {
		transform: translateY(-2px);
	}
	75% {
		transform: translateY(2px);
	}
}

@keyframes yt-player-rewindSpin {
	0% {
		transform: rotate(0deg);
	}
	100% {
		transform: rotate(-360deg);
	}
}

@keyframes pulse {
	0%,
	100% {
		opacity: 1;
		transform: scale(1);
	}
	50% {
		opacity: 0.8;
		transform: scale(1.1);
	}
}

@keyframes ytOverlayFadeInUp {
	0% {
		opacity: 0;
		transform: translateY(6px);
	}
	100% {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes ytUnderFadeOut {
	0% {
		opacity: 1;
	}
	100% {
		opacity: 0;
	}
}

@keyframes ytUnderFadeIn {
	0% {
		opacity: 0;
	}
	100% {
		opacity: 1;
	}
}

@keyframes ytFadeSlideIn {
	from {
		opacity: 0;
		transform: translateY(4px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes fadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

/* Gesture Feedback */
.yt-gesture-feedback-overlay {
	position: absolute;
	top: 0;
	left: 0;
	z-index: 100;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100%;
	background-color: var(--yt-player-bg-primary);
	color: var(--yt-player-text-primary);
	opacity: 0;
	visibility: hidden;
	pointer-events: none;
	transition: opacity 0.2s ease-out, visibility 0s linear 0.2s;
}

.yt-player-wrapper.theme-light .yt-gesture-feedback-overlay {
	background-color: var(--yt-player-bg-primary);
}

.yt-gesture-feedback-overlay.visible {
	opacity: 0.92;
	visibility: visible;
	transition: opacity 0.2s ease-out, visibility 0s linear 0s;
}

.yt-gesture-feedback-overlay svg {
	width: 72px;
	height: 72px;
	fill: currentColor;
}

.yt-player-wrapper.theme-light .yt-gesture-feedback-overlay svg {
	filter: drop-shadow(0 2px 4px var(--yt-player-shadow-medium));
}

/* === DESKTOP HOVER STATES === */

/* All hover states moved to proper media query for desktop-only interactions */
@media (hover: hover) and (pointer: fine) {
	.yt-drawer-close-button:hover {
		color: var(--yt-player-text-primary);
	}

	.yt-playlist-restore-all-button:hover {
		background-color: var(--yt-player-restore-button-hover-bg);
	}

	.yt-playlist-item:hover {
		background-color: var(--yt-player-playlist-hover-bg);
	}

	.yt-playlist-item.active:hover {
		background-color: var(--yt-player-accent-primary-alpha-bg-hover);
	}

	.yt-playlist-wrapper::-webkit-scrollbar-thumb:hover {
		background: var(--yt-player-playlist-text-secondary);
	}

	.yt-seekbar-background:hover .yt-seekbar-handle {
		opacity: 1;
	}

	.yt-seekbar-inline:hover .yt-seekbar-thumb-inline {
		opacity: 1;
	}

	.yt-voice-search-button:hover {
		background-color: var(--yt-player-bg-hover);
	}

	.yt-voice-search-button.listening:hover {
		background-color: var(--yt-player-accent-secondary);
	}

	.yt-voice-search-button.failed:hover {
		background-color: var(--yt-player-button-failed-hover);
	}

	.yt-control-button:hover {
		background-color: var(--yt-player-bg-hover);
	}

	.yt-play-button:hover {
		background-color: var(--yt-player-accent-secondary);
	}

	.yt-play-button.buffering:hover {
		background-color: var(--yt-player-button-buffering-hover);
	}

	.yt-button-group:has(.yt-prev-button:hover) {
		background: linear-gradient(
			to right,
			var(--yt-player-bg-hover) 50%,
			var(--yt-player-bg-secondary) 50%
		);
		transition: background 0.2s ease;
	}

	.yt-button-group:has(.yt-skip-button:hover) {
		background: linear-gradient(
			to right,
			var(--yt-player-bg-secondary) 50%,
			var(--yt-player-bg-hover) 50%
		);
		transition: background 0.2s ease;
	}

	.yt-player-wrapper.hide-skip-button .yt-button-group:has(.yt-prev-button:hover),
	.yt-player-wrapper.hide-prev-button .yt-button-group:has(.yt-skip-button:hover) {
		background: var(--yt-player-bg-hover);
		transition: background-color 0.2s ease;
	}

	.yt-context-menu-option:hover {
		background-color: var(--yt-player-bg-hover);
	}

	.yt-context-menu-details::-webkit-scrollbar-thumb:hover {
		background: rgba(255, 255, 255, 0.3);
	}

	.yt-navbar-link:hover {
		color: var(--yt-player-accent-secondary);
	}

	.yt-navbar-logo-button:hover svg g path:first-of-type {
		fill: var(--yt-player-accent-secondary);
	}

	.yt-favourites-dialog-filter-toggle:hover {
		background: var(--yt-player-bg-secondary);
		color: var(--yt-player-text-primary);
	}

	.yt-favourites-dialog-search-toggle:hover {
		background: var(--yt-player-bg-secondary);
		color: var(--yt-player-text-primary);
	}

	.yt-favourites-dialog-search-clear:hover {
		background: var(--yt-player-bg-secondary);
		color: var(--yt-player-text-primary);
	}

	.yt-filter-popup-close:hover {
		background: var(--yt-player-bg-secondary);
		color: var(--yt-player-text-primary);
	}

	.yt-filter-popup-btn:hover {
		background: var(--yt-player-bg-tertiary);
		border-color: var(--yt-player-accent-primary);
		color: var(--yt-player-text-primary);
	}

	.yt-favourites-dialog-add-btn:hover {
		background: var(--yt-player-accent-secondary);
	}

	.yt-favourites-dialog-close:hover {
		background: var(--yt-player-bg-secondary);
		color: var(--yt-player-text-primary);
	}

	.yt-favourites-dialog-item:hover {
		background: transparent;
	}

	.yt-favourites-dialog-more-options-btn:hover {
		background: var(--yt-player-bg-tertiary);
		color: var(--yt-player-text-primary);
	}

	.yt-favourites-dialog-overlay-btn:hover {
		background: var(--yt-player-bg-secondary);
		transform: translateY(-1px);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
	}

	.yt-favourites-dialog-overlay-remove-btn:hover {
		background: rgba(255, 0, 0, 0.1);
		border-color: rgba(255, 68, 68, 0.3);
		color: #ff4444;
	}

	.yt-dropdown-option:hover {
		background: var(--yt-player-bg-secondary);
	}
}
